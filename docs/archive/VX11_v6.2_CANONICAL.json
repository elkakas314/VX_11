{
    "version": "6.2",
    "canonization_timestamp": "2025-12-01T22:05:00Z",
    "phases_implemented": [
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9,
        10
    ],
    "total_phases": 9,
    "status": "CANONIZED",
    "canonical_endpoints": {
        "gateway": {
            "base_url": "http://127.0.0.1:52111",
            "endpoints": {
                "health": {
                    "method": "GET",
                    "path": "/health",
                    "description": "Health check"
                },
                "status": {
                    "method": "GET",
                    "path": "/vx11/status",
                    "description": "VX11 status with ports"
                },
                "chat": {
                    "method": "POST",
                    "path": "/vx11/chat",
                    "description": "Chat con context-7",
                    "phase": 2
                },
                "orchestrate": {
                    "method": "POST",
                    "path": "/vx11/orchestrate",
                    "description": "Full orchestration pipeline",
                    "phase": 7,
                    "params": {
                        "query": "string",
                        "context7": "object optional",
                        "pipeline_type": "full|quick"
                    }
                },
                "action_control": {
                    "method": "POST",
                    "path": "/vx11/action/control",
                    "description": "Control inter-módulo",
                    "params": {
                        "target": "module_name",
                        "action": "status|start|stop|restart"
                    }
                },
                "validate_copilot": {
                    "method": "GET",
                    "path": "/vx11/validate/copilot-bridge",
                    "description": "Validar Copilot bridge",
                    "phase": 9
                }
            }
        },
        "madre": {
            "base_url": "http://127.0.0.1:52112",
            "endpoints": {
                "health": {
                    "method": "GET",
                    "path": "/health"
                },
                "control": {
                    "method": "POST",
                    "path": "/control"
                },
                "chat": {
                    "method": "POST",
                    "path": "/chat",
                    "description": "Chat with context-7 auto-generation",
                    "phase": 2
                }
            }
        },
        "switch": {
            "base_url": "http://127.0.0.1:52113",
            "endpoints": {
                "health": {
                    "method": "GET",
                    "path": "/health"
                },
                "query": {
                    "method": "POST",
                    "path": "/switch/query",
                    "description": "Engine scoring con fórmula canónica",
                    "phase": 3
                },
                "pheromone_update": {
                    "method": "POST",
                    "path": "/switch/pheromone/update",
                    "description": "Update feromona de engine",
                    "phase": 4
                },
                "pheromone_decay_all": {
                    "method": "POST",
                    "path": "/switch/pheromone/decay-all",
                    "description": "Decay todas las feromonas",
                    "phase": 4
                },
                "pheromone_summary": {
                    "method": "GET",
                    "path": "/switch/pheromone/summary",
                    "description": "Resumen de feromonas",
                    "phase": 4
                }
            }
        },
        "hermes": {
            "base_url": "http://127.0.0.1:52114",
            "endpoints": {
                "health": {
                    "method": "GET",
                    "path": "/health"
                },
                "control": {
                    "method": "POST",
                    "path": "/control"
                },
                "playwright": {
                    "method": "POST",
                    "path": "/hermes/playwright",
                    "description": "Browser automation actions",
                    "phase": 6,
                    "security": "requires auth_level=operator|admin"
                }
            }
        },
        "hormiguero": {
            "base_url": "http://127.0.0.1:52115",
            "endpoints": {
                "health": {
                    "method": "GET",
                    "path": "/health"
                },
                "control": {
                    "method": "POST",
                    "path": "/control"
                },
                "ga_optimize": {
                    "method": "POST",
                    "path": "/hormiguero/ga/optimize",
                    "description": "Genetic algorithm optimization",
                    "phase": 5
                },
                "ga_summary": {
                    "method": "GET",
                    "path": "/hormiguero/ga/summary",
                    "description": "GA evolution summary",
                    "phase": 5
                },
                "ga_best_params": {
                    "method": "GET",
                    "path": "/hormiguero/ga/best-params/{engine_id}",
                    "description": "Best params for engine",
                    "phase": 5
                }
            }
        },
        "mcp": {
            "base_url": "http://127.0.0.1:52116",
            "endpoints": {
                "health": {
                    "method": "GET",
                    "path": "/health"
                },
                "control": {
                    "method": "POST",
                    "path": "/control"
                },
                "copilot_bridge": {
                    "method": "POST",
                    "path": "/mcp/copilot-bridge",
                    "description": "MCP protocol for Copilot",
                    "phase": 8,
                    "methods": [
                        "LIST_TOOLS",
                        "CALL_TOOL",
                        "POST"
                    ]
                }
            }
        },
        "shubniggurath": {
            "base_url": "http://127.0.0.1:52117",
            "endpoints": {
                "health": {
                    "method": "GET",
                    "path": "/health"
                },
                "control": {
                    "method": "POST",
                    "path": "/control"
                },
                "copilot_prepare": {
                    "method": "POST",
                    "path": "/shub/copilot-prepare",
                    "description": "Prepare Shubniggurath (v6.2: STANDBY mode)",
                    "phase": 10,
                    "actions": [
                        "activate",
                        "deactivate",
                        "status"
                    ]
                },
                "copilot_status": {
                    "method": "GET",
                    "path": "/shub/copilot-status",
                    "description": "Get Shubniggurath state",
                    "phase": 10
                },
                "features": {
                    "method": "GET",
                    "path": "/shub/features",
                    "description": "List available features",
                    "phase": 10
                }
            }
        }
    },
    "canonical_models": {
        "context7": {
            "file": "config/context7.py",
            "class": "Context7Generator",
            "layers": 7,
            "usage": "Auto-generated if missing, stored in task results",
            "backward_compatible": true
        },
        "scoring": {
            "file": "switch/scoring_engine.py",
            "class": "SwitchScoringEngine",
            "formula": "w_q×quality + w_l×(1-latency) + w_c×(1-cost) + w_f×pheromone",
            "modes": [
                "eco",
                "balanced",
                "high-perf",
                "critical"
            ],
            "supported_engines": 5
        },
        "pheromone": {
            "file": "switch/pheromone_engine.py",
            "class": "PheromoneEngine",
            "decay_factor": 0.95,
            "reward_range": [
                -0.3,
                0.2
            ],
            "persistence": "switch/pheromones.json"
        },
        "genetic_algorithm": {
            "file": "hormiguero/genetic_algorithm.py",
            "class": "GeneticAlgorithm",
            "population_size": 20,
            "generations_default": 100,
            "selection": "tournament k=3",
            "parameters": 4
        }
    },
    "canonical_flows": {
        "orchestration_full": {
            "phases": [
                7
            ],
            "steps": [
                "Switch: Engine scoring",
                "Hermes: Execute if needed",
                "Madre: Persist result",
                "Return complete response"
            ]
        },
        "copilot_chat": {
            "phases": [
                8,
                9
            ],
            "protocol": "MCP",
            "steps": [
                "Parse MCP method",
                "Route to handler",
                "Validate context-7",
                "Execute action",
                "Return MCP response"
            ]
        },
        "copilot_validation": {
            "phases": [
                9
            ],
            "tests": 3,
            "coverage": "MCP protocol, context-7 propagation, orchestration"
        }
    },
    "canonical_files": {
        "new_utilities": [
            "config/context7.py",
            "switch/scoring_engine.py",
            "switch/pheromone_engine.py",
            "hormiguero/genetic_algorithm.py",
            "config/orchestration_bridge.py",
            "config/copilot_bridge_validator.py"
        ],
        "new_data": [
            "switch/pheromones.json"
        ],
        "new_tests": [
            "tests/test_phase12_fases2_10.py"
        ],
        "modified_files": [
            "madre/main.py",
            "switch/main.py",
            "hermes/main.py",
            "hormiguero/main.py",
            "mcp/main.py",
            "gateway/main.py",
            "shubniggurath/main.py"
        ]
    },
    "canonical_constraints": {
        "backward_compatibility": "100% - all changes additive",
        "zero_breaking_changes": true,
        "context7_optional": true,
        "old_endpoints_preserved": true,
        "module_structure_preserved": true,
        "database_unchanged": true
    },
    "canonical_validation": {
        "audit_status": "PASS",
        "syntax_errors": 0,
        "modules_intact": 9,
        "new_files_created": 8,
        "endpoints_functional": 35,
        "test_coverage": 14,
        "documentation_complete": true
    },
    "transition_notes": {
        "v6_1_to_v6_2": "Seamless - context-7 optional, scoring integrated, pheromones active by default",
        "v6_2_to_v7_0": "Shubniggurath activation, multi-model ensemble, distributed caching",
        "deprecations": "None - all v6.1 endpoints still work"
    }
}