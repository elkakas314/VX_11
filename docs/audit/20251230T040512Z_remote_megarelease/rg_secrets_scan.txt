VX11_QUICK_START.md:174:- ❌ Tocar `tokens.env` (READ-ONLY)
OPERATOR_P11_P1_HARDENING_COMPLETE.md:19:b9b1991 — TASK B: Env hardening (key rotation ready + .env.local)
OPERATOR_P11_P1_HARDENING_COMPLETE.md:43:    9. .env.local Tracking — Not in .gitignore (TASK B + D fix)
OPERATOR_P11_P1_HARDENING_COMPLETE.md:54:   - Added: `.env`, `.env.local`, `.env.*.local`, `.env.deepseek`, `.env.*`
OPERATOR_P11_P1_HARDENING_COMPLETE.md:58:   - Added: `env_file: .env.local` to tentaculo_link service
OPERATOR_P11_P1_HARDENING_COMPLETE.md:61:3. **.env.example** — Already exists as secure template (no real keys)
OPERATOR_P11_P1_HARDENING_COMPLETE.md:65:- ✓ .env files gitignored (no staging of secrets)
OPERATOR_P11_P1_HARDENING_COMPLETE.md:66:- ✓ Key rotation ready: `export DEEPSEEK_API_KEY=sk-new && docker compose up`
OPERATOR_P11_P1_HARDENING_COMPLETE.md:70:- **After**: New key in .env.local, docker-compose auto-loads, no restart needed
OPERATOR_P11_P1_HARDENING_COMPLETE.md:124:   - **Custom hook**: .env file secret detection (prevents hardcoded DEEPSEEK_API_KEY commits)
OPERATOR_P11_P1_HARDENING_COMPLETE.md:136:   - **env-vars-check**: Grep for exposed secrets in .env files + hardcoded keys in code
OPERATOR_P11_P1_HARDENING_COMPLETE.md:146:   - Added: `.env`, `.env.local`, `.env.*.local`, `.env.deepseek`, `.env.*`, `secrets/*.env`
OPERATOR_P11_P1_HARDENING_COMPLETE.md:147:   - Now: .env files are never tracked in git
OPERATOR_P11_P1_HARDENING_COMPLETE.md:190:| .gitignore | ✅ | .env* patterns added, secrets protected |
OPERATOR_P11_P1_HARDENING_COMPLETE.md:238:**Tests**: ✓ Syntax, ✓ Docker-compose parse, ✓ Chat functional, ✓ .env protected  
operator/frontend/src/views/CoDevView.tsx:39:            const resp = await apiClient.request('POST', '/operator/api/v1/assist/deepseek_r1', {
operator/frontend/src/views/SettingsView.tsx:26:        chat: { model: 'deepseek-r1', temperature: 0.7 },
operator/frontend/src/views/SettingsView.tsx:129:                            value={settings.chat?.model || 'deepseek-r1'}
operator/frontend/src/views/SettingsView.tsx:132:                            <option value="deepseek-r1">DeepSeek R1</option>
operator/frontend/src/App.tsx:23:        environment: process.env.NODE_ENV,
operator/frontend/src/services/api.ts:12:    import.meta.env.VITE_VX11_TOKEN ||
operator/frontend/src/services/api.ts:13:    import.meta.env.VITE_VX11_TENTACULO_TOKEN ||
operator/frontend/src/services/api.ts:16:    import.meta.env.VITE_VX11_API_BASE ||
operator/frontend/src/services/api.ts:17:    import.meta.env.VITE_VX11_API_BASE_URL ||
operator/frontend/src/services/api.ts:19:const DEFAULT_BASE = import.meta.env.DEV
operator/frontend/vite.config.ts:25:        'import.meta.env.VITE_VX11_API_BASE': JSON.stringify(process.env.VITE_VX11_API_BASE ?? ''),
operator/frontend/vite.config.ts:26:        'import.meta.env.VITE_VX11_API_BASE_URL': JSON.stringify(process.env.VITE_VX11_API_BASE_URL ?? ''),
operator/backend/main.py:28:RATE_LIMIT_WINDOW_SEC = int(os.environ.get("VX11_OPERATOR_RATE_WINDOW_SEC", "60"))
operator/backend/main.py:29:RATE_LIMIT_MAX = int(os.environ.get("VX11_OPERATOR_RATE_LIMIT", "60"))
operator/backend/main.py:32:AUDIT_LOG_PATH = os.environ.get(
operator/backend/main.py:36:SCORECARD_PATH = os.environ.get(
operator/backend/main.py:39:PERCENTAGES_PATH = os.environ.get(
operator/backend/main.py:223:    "chat": {"model": "deepseek-r1", "temperature": 0.7},
operator/backend/main.py:490:    heartbeat_sec = int(os.environ.get("VX11_OPERATOR_SSE_HEARTBEAT", "15"))
operator/backend/main.py:491:    poll_interval_sec = int(os.environ.get("VX11_OPERATOR_SSE_POLL", "60"))
operator/backend/main.py:894:@app.post("/operator/api/assist/deepseek_r1")
operator/backend/main.py:895:async def assist_deepseek(
operator/backend/main.py:904:        runbook="CoDev assist disabled; enable deepseek_r1 in switch and open an operator window.",
operator/backend/main.py:908:@app.get("/operator/api/assist/deepseek_r1/status")
operator/backend/main.py:909:async def assist_deepseek_status(
operator/backend/main.py:916:        runbook="CoDev assist disabled; enable deepseek_r1 in switch and open an operator window.",
operator/backend/main.py:1058:    ("/assist/deepseek_r1", ["POST"], assist_deepseek),
operator/backend/main.py:1059:    ("/assist/deepseek_r1/status", ["GET"], assist_deepseek_status),
OPERATOR_CHAT_QUICKREF.md:27:  "model": "deepseek-chat",
OPERATOR_CHAT_QUICKREF.md:28:  "fallback_source": "deepseek_api|switch|degraded",
OPERATOR_CHAT_QUICKREF.md:80:# Copy .env.example to .env.local
OPERATOR_CHAT_QUICKREF.md:81:cp .env.example .env.local
OPERATOR_CHAT_QUICKREF.md:84:echo "DEEPSEEK_API_KEY=sk-your-key" >> .env.local
OPERATOR_CHAT_QUICKREF.md:98:# Update .env.local
OPERATOR_CHAT_QUICKREF.md:99:echo "DEEPSEEK_API_KEY=sk-new-key" > .env.local
OPERATOR_CHAT_QUICKREF.md:129:# chat_deepseek_fallback_success: DeepSeek worked
OPERATOR_CHAT_QUICKREF.md:145:- ✅ .env* files gitignored
OPERATOR_CHAT_QUICKREF.md:200:1. Check DeepSeek API key: `grep DEEPSEEK_API_KEY .env.local`
OPERATOR_CHAT_QUICKREF.md:201:2. Check container logs: `docker compose logs -f tentaculo_link | grep deepseek`
OPERATOR_CHAT_QUICKREF.md:202:3. Verify internet connection to api.deepseek.com
docker-compose.production.yml:51:      # NOTE: DEEPSEEK_API_KEY MUST be set from .env (never hardcode in repo)
docker-compose.production.yml:52:      # See .env.example for template
docker-compose.production.yml:54:      - DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
docker-compose.yml:47:      # NOTE: DEEPSEEK_API_KEY MUST be set from .env (never hardcode in repo)
docker-compose.yml:48:      # See .env.example for template
docker-compose.yml:50:      - DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
config/deepseek.py:4:Si `settings.deepseek_api_key` existe, `call_deepseek` intentará usar `httpx`.
config/deepseek.py:20:logger = logging.getLogger("deepseek")
config/deepseek.py:23:DEEPSEEK_R1_ENDPOINT = "https://api.deepseek.com/beta/chat/completions"
config/deepseek.py:27:def call_deepseek(
config/deepseek.py:36:    key = getattr(settings, "deepseek_api_key", None)
config/deepseek.py:49:        "model": getattr(settings, "deepseek_r1_model", "deepseek-reasoner"),
config/deepseek.py:58:            return {"ok": True, "provider": "deepseek", "result": data}
config/deepseek.py:61:        return {"ok": False, "provider": "deepseek", "error": str(e)}
config/deepseek.py:67:def call_deepseek_reasoner(
config/deepseek.py:80:    key = getattr(settings, "deepseek_api_key", None)
config/deepseek.py:82:    if not key or not getattr(settings, "deepseek_r1_enabled", True):
config/deepseek.py:93:            "model": getattr(settings, "deepseek_r1_model", "deepseek-reasoner"),
config/deepseek.py:114:                "provider": "deepseek-r1",
config/deepseek.py:139:async def call_deepseek_reasoner_async(
config/deepseek.py:146:    """Async version de call_deepseek_reasoner."""
config/deepseek.py:148:    key = getattr(settings, "deepseek_api_key", None)
config/deepseek.py:150:    if not key or not getattr(settings, "deepseek_r1_enabled", True):
config/deepseek.py:161:            "model": getattr(settings, "deepseek_r1_model", "deepseek-reasoner"),
config/deepseek.py:184:                "provider": "deepseek-r1",
config/deepseek.py:251:        if getattr(settings, "deepseek_r1_enabled", False):
config/deepseek.py:253:                "provider": "deepseek-r1",
config/deepseek.py:254:                "model": getattr(settings, "deepseek_r1_model", "deepseek-reasoner"),
config/deepseek.py:262:        if "deepseek" in available_providers.get("remote", {}):
config/deepseek.py:264:                "provider": "deepseek",
config/deepseek.py:265:                "model": "deepseek-chat",
attic/prompts/switch.prompt.json:141:        "deepseek_auto": {
config/settings.py:21:        env_file=".env", case_sensitive=False, protected_namespaces=()
config/settings.py:110:    openai_api_key: Optional[str] = None
config/settings.py:111:    deepseek_api_key: Optional[str] = None
config/settings.py:113:    default_model: str = "auto"  # auto, local, deepseek
config/settings.py:140:    deepseek_base_url: str = "https://api.deepseek.com/v1"
config/settings.py:141:    deepseek_daily_limit_tokens: int = 100000
config/settings.py:142:    deepseek_monthly_limit_tokens: int = 3000000
config/settings.py:143:    deepseek_reset_hour_utc: int = 0
attic/prompts/context-7.schema.json:107:            "description": "Task-specific context",
attic/prompts/hermes.md:38:  "name": "deepseek-cli",
attic/prompts/hermes.md:41:  "bin_path": "/usr/local/bin/deepseek",
attic/prompts/shubniggurath.prompt.json:37:                    "ai_engine": "deepseek|local_gguf",
attic/prompts/shubniggurath.prompt.json:153:                "engine": "deepseek|gpt5_mini",
attic/VX11_SYSTEM_STATUS.md:83:   - Touch tokens.env (read-only only)
attic/VX11_SYSTEM_STATUS.md:150:- `tokens.env` (credentials only)
attic/VX11_SYSTEM_STATUS.md:151:- `tokens.env.master` (sensitive)
config/switch_hermes_integration.py:33:        "preferred_engines": ["openrouter_text", "deepseek", "hermes_cli"],
config/switch_hermes_integration.py:40:        "preferred_engines": ["deepseek", "openrouter_text"],
config/switch_hermes_integration.py:43:        "fallback_chain": ["deepseek"],
config/copilot_operator.py:182:    def __init__(self, env_file: str = "tokens.env"):
config/copilot_operator.py:184:        self.env_file = env_file
attic/hormiguero/auto_organizer.py:101:            "tokens.env",
attic/hormiguero/auto_organizer.py:102:            "tokens.env.master",
attic/hormiguero/auto_organizer.py:103:            "tokens.env.sample",
attic/hormiguero/auto_organizer.py:106:            ".env.example",
config/db_schema.py:103:    provider = Column(String(50), nullable=False)  # deepseek, local, hermes, etc.
config/db_schema.py:534:    )  # e.g., "deepseek_r1", "openrouter"
config/db_schema.py:535:    base_url = Column(String(500), nullable=True)  # e.g., "https://api.deepseek.com/v1"
config/db_schema.py:536:    api_key_env = Column(String(100), nullable=False)  # e.g., "DEEPSEEK_API_KEY"
config/db_schema.py:687:    name = Column(String(128), nullable=False)  # Ej: "hija-task-1-mut0"
config/db_schema.py:731:    )  # Nombre del CLI (ej. "deepseek_r1")
config/db_schema.py:1068:if os.environ.get("VX11_TEST_IMPORT_SAFE", "0") in ("0", "false", "False", ""):
config/copilot_bridge_validator_operator.py:229:    sensitive_meta_fields = ["api_key", "token", "secret", "password", "auth"]
config/tokens.py:28:    - Optional fallback to tokens.env / tokens.env.master if
config/tokens.py:34:    allow_files = os.environ.get("VX11_ALLOW_TOKEN_FILES", "").lower() in ("1", "true", "yes")
config/tokens.py:38:        master_path = repo_root / "tokens.env.master"
config/tokens.py:39:        env_path = repo_root / "tokens.env"
config/tokens.py:45:        if os.environ.get(k) is None and v != "":
config/tokens.py:46:            os.environ[k] = v
config/tokens.py:48:    return {k: os.environ.get(k, v) for k, v in tokens.items()}
config/tokens.py:52:    return os.environ.get(key, default)
docker-compose.override.yml:49:    env_file: .env.local
FASE_8_INTEGRATION_REFERENCE.txt:139:  [ ] Set VX11_TENTACULO_LINK_TOKEN in .env or docker-compose.yml
attic/shubniggurath/README.md:33:# Expected: {"status": "queued", "task_id": "mock-task-001"}
attic/shubniggurath/README.md:139:# .env (if running standalone)
tentaculo_link/routes/window.py:18:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/window.py:20:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/window.py:87:    token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/window.py:105:    token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/settings.py:19:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/settings.py:21:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/settings.py:38:    repo_root = Path(os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11"))
tentaculo_link/routes/settings.py:60:    if not os.environ.get("VX11_SETTINGS_ENABLED", "false").lower() in ("true", "1"):
tentaculo_link/routes/settings.py:110:    if not os.environ.get("VX11_SETTINGS_ENABLED", "false").lower() in ("true", "1"):
tentaculo_link/routes/internal.py:13:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/internal.py:15:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/audit.py:22:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/audit.py:24:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/audit.py:33:    repo_root = Path(os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11"))
tentaculo_link/routes/audit.py:72:    if not os.environ.get("VX11_AUDIT_ENABLED", "false").lower() in ("true", "1"):
tentaculo_link/routes/audit.py:170:    if not os.environ.get("VX11_AUDIT_ENABLED", "false").lower() in ("true", "1"):
tentaculo_link/routes/audit.py:227:    if not os.environ.get("VX11_AUDIT_ENABLED", "false").lower() in ("true", "1"):
tentaculo_link/routes/audit.py:251:            repo_root = Path(os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11"))
tentaculo_link/routes/metrics.py:21:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/metrics.py:23:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/metrics.py:64:    if not os.environ.get("VX11_METRICS_ENABLED", "false").lower() in ("true", "1"):
tentaculo_link/routes/events.py:19:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/events.py:21:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/events.py:74:    if not os.environ.get("VX11_EVENTS_ENABLED", "false").lower() in ("true", "1"):
tentaculo_link/routes/rails.py:28:        repo_root = os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11")
tentaculo_link/routes/rails.py:34:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/rails.py:36:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/routes/rails.py:45:    repo_root = Path(os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11"))
tentaculo_link/routes/rails.py:77:    if not os.environ.get("VX11_MANIFESTATOR_ENABLED", "false").lower() in (
tentaculo_link/routes/rails.py:123:    if not os.environ.get("VX11_MANIFESTATOR_ENABLED", "false").lower() in (
tentaculo_link/routes/rails.py:179:    if not os.environ.get("VX11_MANIFESTATOR_ENABLED", "false").lower() in (
tentaculo_link/routes/hormiguero.py:13:    if not os.environ.get("ENABLE_AUTH", "true").lower() in ("true", "1"):
tentaculo_link/routes/hormiguero.py:15:    required_token = os.environ.get("VX11_TENTACULO_LINK_TOKEN", "")
tentaculo_link/deepseek_client.py:25:    def __init__(self, api_key: Optional[str] = None, base_url: Optional[str] = None):
tentaculo_link/deepseek_client.py:26:        self.api_key = api_key or settings.deepseek_api_key
tentaculo_link/deepseek_client.py:27:        self.base_url = base_url or settings.deepseek_base_url
tentaculo_link/deepseek_client.py:29:        self.model = "deepseek-chat"  # Default model
tentaculo_link/deepseek_client.py:32:        if not self.api_key:
tentaculo_link/deepseek_client.py:41:                "Authorization": f"Bearer {self.api_key}",
tentaculo_link/deepseek_client.py:91:                    f"deepseek_api_error:status={resp.status_code}:{error_text}",
tentaculo_link/deepseek_client.py:114:                    f"deepseek_api_malformed:no_choices_in:{data}",
tentaculo_link/deepseek_client.py:127:                f"deepseek_api_timeout:{self.timeout}s",
tentaculo_link/deepseek_client.py:139:                f"deepseek_api_exception:{type(exc).__name__}:{str(exc)[:100]}",
tentaculo_link/deepseek_client.py:186:                    (session_id, "deepseek-fallback", "tentaculo-deepseek", now, now),
attic/shubniggurath/pro/studio_agent.py:5:from config import deepseek
attic/shubniggurath/pro/studio_agent.py:19:async def deepseek_advise(prompt: str) -> Dict[str, Any]:
attic/shubniggurath/pro/studio_agent.py:20:    if getattr(deepseek, "call_deepseek_reasoner_async", None):
attic/shubniggurath/pro/studio_agent.py:22:            result, latency, conf = await deepseek.call_deepseek_reasoner_async(prompt, task_type="audio_mix")
attic/shubniggurath/pro/studio_agent.py:23:            return {"provider": "deepseek-r1", "result": result, "latency_ms": latency, "confidence": conf}
tentaculo_link/_legacy/notes/MOVE_PLAN_2025-12-16.md:5:1. `tokens.env` (containing live API keys) MOVED -> `tentaculo_link/_legacy/quarantine/DO_NOT_RUN/tokens.env`.
tentaculo_link/_legacy/notes/MOVE_PLAN_2025-12-16.md:7:   - Estado: archivo movido, nueva `tokens.env` redacted creada en repo root con placeholders.
tentaculo_link/db/events_metrics.py:21:    repo_root = Path(os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11"))
tentaculo_link/deepseek_r1_client.py:26:log = logging.getLogger("vx11.tentaculo_link.deepseek_r1")
tentaculo_link/deepseek_r1_client.py:42:        api_key: Optional[str] = None,
tentaculo_link/deepseek_r1_client.py:48:        self.api_key = api_key or os.environ.get("DEEPSEEK_API_KEY")
tentaculo_link/deepseek_r1_client.py:49:        if not self.api_key:
tentaculo_link/deepseek_r1_client.py:54:        self.base_url = "https://api.deepseek.com/chat/completions"
tentaculo_link/deepseek_r1_client.py:55:        self.model = "deepseek-reasoner"
tentaculo_link/deepseek_r1_client.py:76:                    f"deepseek_r1: rate_limit_exceeded ({len(self._request_times)}/{self.rate_limit_per_hour})"
tentaculo_link/deepseek_r1_client.py:92:            "Authorization": f"Bearer {self.api_key}",
tentaculo_link/deepseek_r1_client.py:104:                        log.info(f"deepseek_r1: OK (attempt {attempt + 1})")
tentaculo_link/deepseek_r1_client.py:109:                        log.warning(f"deepseek_r1: {error_msg} (attempt {attempt + 1})")
tentaculo_link/deepseek_r1_client.py:112:                            log.info(f"deepseek_r1: retrying in {wait_sec}s")
tentaculo_link/deepseek_r1_client.py:119:                        log.error(f"deepseek_r1: {error_msg} (attempt {attempt + 1})")
tentaculo_link/deepseek_r1_client.py:130:                log.error(f"deepseek_r1: {error_msg} (attempt {attempt + 1})")
tentaculo_link/deepseek_r1_client.py:133:                    log.info(f"deepseek_r1: retrying in {wait_sec}s")
tentaculo_link/deepseek_r1_client.py:141:                    f"deepseek_r1: {error_msg}: {str(e)[:100]} (attempt {attempt + 1})"
tentaculo_link/deepseek_r1_client.py:168:                "model": "deepseek-reasoner",
tentaculo_link/deepseek_r1_client.py:183:            log.warning(f"deepseek_r1 [{request_id}]: rate limit exceeded")
tentaculo_link/deepseek_r1_client.py:216:                f"deepseek_r1 [{request_id}]: failed — {error_msg} ({elapsed_ms}ms)"
tentaculo_link/deepseek_r1_client.py:248:                f"deepseek_r1 [{request_id}]: success ({total_tokens} tokens, {reasoning_tokens} reasoning, {elapsed_ms}ms)"
tentaculo_link/deepseek_r1_client.py:265:                f"deepseek_r1 [{request_id}]: response_parse_error: {str(e)[:100]}"
tentaculo_link/deepseek_r1_client.py:291:_deepseek_r1_client: Optional[DeepSeekR1Client] = None
tentaculo_link/deepseek_r1_client.py:294:async def get_deepseek_r1_client() -> DeepSeekR1Client:
tentaculo_link/deepseek_r1_client.py:296:    global _deepseek_r1_client
tentaculo_link/deepseek_r1_client.py:297:    if _deepseek_r1_client is None:
tentaculo_link/deepseek_r1_client.py:298:        _deepseek_r1_client = DeepSeekR1Client()
tentaculo_link/deepseek_r1_client.py:299:    return _deepseek_r1_client
tentaculo_link/main_v7.py:49:from tentaculo_link.deepseek_client import DeepSeekClient, save_chat_to_db
tentaculo_link/main_v7.py:50:from tentaculo_link.deepseek_r1_client import get_deepseek_r1_client
tentaculo_link/main_v7.py:1588:SHUB_UPSTREAM = os.environ.get("VX11_SHUB_UPSTREAM", "http://shubniggurath:8007")
tentaculo_link/main_v7.py:1589:SHUB_GATEWAY_TOKEN = os.environ.get("VX11_GATEWAY_TOKEN", VX11_TOKEN)
tentaculo_link/main_v7.py:1987:    Response: {"access_token": "...", "token_type": "bearer", "expires_in": 3600}
tentaculo_link/main_v7.py:2126:    - fallback_source: "switch_cli_copilot" | "local_llm_degraded" | "deepseek_api" (lab only)
tentaculo_link/main_v7.py:2140:    allow_deepseek = os.environ.get("VX11_CHAT_ALLOW_DEEPSEEK", "0") == "1"
tentaculo_link/main_v7.py:2259:    if allow_deepseek:
tentaculo_link/main_v7.py:2262:            # Select provider: deepseek_r1 if configured, else mock
tentaculo_link/main_v7.py:2263:            provider = get_provider("deepseek_r1")
tentaculo_link/main_v7.py:2291:                    "model": response.get("provider", "deepseek_r1"),
tentaculo_link/main_v7.py:2292:                    "fallback_source": response.get("provider", "deepseek_api"),
tentaculo_link/main_v7.py:2736:            "provider_usage": {"mock": 180, "deepseek_r1": 40, ...}
tentaculo_link/main_v7.py:2783:            "deepseek_r1": 40,
tentaculo_link/main_v7.py:2889:                    if not os.environ.get("HORMIGUERO_BUILDER_ENABLED")
tentaculo_link/main_v7.py:2898:                    if not os.environ.get("SHUBNIGGURATH_ENABLED")
tentaculo_link/main_v7.py:2907:                    if not os.environ.get("HORMIGUERO_ENABLED")
tentaculo_link/main_v7.py:2984:@app.post("/operator/api/assist/deepseek_r1", tags=["operator-api-codev"])
tentaculo_link/main_v7.py:2985:async def operator_api_assist_deepseek_r1(
tentaculo_link/main_v7.py:3006:        "model": "deepseek-reasoner",
tentaculo_link/main_v7.py:3035:    enable_codev = os.environ.get("VX11_OPERATOR_CODEV_ENABLED", "0") == "1"
tentaculo_link/main_v7.py:3039:            f"deepseek_r1_codev_disabled:request={request_id}:session={session_id}",
tentaculo_link/main_v7.py:3054:        client = await get_deepseek_r1_client()
tentaculo_link/main_v7.py:3066:                f"deepseek_r1_invoke_ok:request={request_id}:purpose={req.purpose}:session={session_id}:tokens={result.get('tokens_used')}:elapsed_ms={result.get('elapsed_ms')}",
tentaculo_link/main_v7.py:3072:                f"deepseek_r1_invoke_failed:request={request_id}:purpose={req.purpose}:session={session_id}:error={result.get('error_code')}",
tentaculo_link/main_v7.py:3082:            f"deepseek_r1_not_configured:request={request_id}:error={str(e)[:50]}",
tentaculo_link/main_v7.py:3098:            f"deepseek_r1_exception:request={request_id}:error={type(e).__name__}:{str(e)[:100]}",
tentaculo_link/main_v7.py:3112:@app.get("/operator/api/assist/deepseek_r1/status", tags=["operator-api-codev"])
tentaculo_link/main_v7.py:3113:async def operator_api_assist_deepseek_r1_status(_: bool = Depends(token_guard)):
tentaculo_link/main_v7.py:3124:        "model": "deepseek-reasoner",
tentaculo_link/main_v7.py:3130:        enable_codev = os.environ.get("VX11_OPERATOR_CODEV_ENABLED", "0") == "1"
tentaculo_link/main_v7.py:3131:        api_key_set = bool(os.environ.get("DEEPSEEK_API_KEY"))
tentaculo_link/main_v7.py:3133:        status = "enabled" if (enable_codev and api_key_set) else "disabled"
tentaculo_link/main_v7.py:3137:            "configured": api_key_set,
tentaculo_link/main_v7.py:3141:            "model": "deepseek-reasoner",
tentaculo_link/main_v7.py:3148:            f"deepseek_r1_status_error:{str(e)[:100]}",
tentaculo_link/main_v7.py:3603:        "chat": {"model": "deepseek-r1", "temperature": 0.7},
attic/shubniggurath/docs/SHUB_MANUAL.md:39:│   └── .env.shub
mcp/main.py:229:    env = req.env or {}
mcp/conversational_v2.py:25:from config.deepseek import call_deepseek_reasoner_async
mcp/conversational_v2.py:172:        reasoning = await call_deepseek_reasoner_async(
OPERATOR_DELIVERY_SUMMARY.txt:142:│          ↓ routes to madre/deepseek                                          │
attic/shubniggurath/shub_routers.py:10:from config import deepseek
attic/shubniggurath/shub_routers.py:200:            if getattr(settings, "deepseek_api_key", None) and audio_summary:
attic/shubniggurath/shub_routers.py:201:                result, latency_ms, confidence = await deepseek.call_deepseek_reasoner_async(
attic/shubniggurath/shub_routers.py:206:                    "provider": result.get("provider", "deepseek-r1"),
VALIDATION_REPORT_INDEPENDENT.md:105:tests/test_deepseek_provider.py          14/14 PASS
PRODUCTION_CLOSURE_FINAL_SUMMARY.md:75:| **Feature Flags** | ✅ PASS | playwright OFF, deepseek OFF, smoke OFF |
DEPLOYMENT_READY_SUMMARY.md:78:2. /etc/vx11/tokens.env (system)
DEPLOYMENT_READY_SUMMARY.md:80:4. .env (project root)
DEPLOYMENT_READY_SUMMARY.md:81:5. tokens.env (git template)
manifestator/patch_generator_v2.py:111:            extensions = {".env", ".json", ".yml", ".yaml"}
attic/shubniggurath/README_FASE1.md:359:- Verificar tokens: `cat tokens.env`
manifestator/main.py:20:from config import deepseek
manifestator/main.py:647:        result, latency_ms, confidence = await deepseek.call_deepseek_reasoner_async(
manifestator/autopatcher_v2.py:26:from config.deepseek import call_deepseek_reasoner_async
manifestator/autopatcher_v2.py:155:        reasoning = await call_deepseek_reasoner_async(
manifestator/auto_patcher.py:21:def _ensure_deepseek_env(repo_root: Path = REPO_ROOT) -> bool:
manifestator/auto_patcher.py:22:    """Load DEEPSEEK_API_KEY from tokens.env if not already exported."""
manifestator/auto_patcher.py:23:    if os.environ.get("DEEPSEEK_API_KEY"):
manifestator/auto_patcher.py:25:    env_path = repo_root / "tokens.env"
manifestator/auto_patcher.py:37:                os.environ.setdefault("DEEPSEEK_API_KEY", value.strip().strip('"').strip("'"))
manifestator/auto_patcher.py:51:        _ensure_deepseek_env(repo_root)  # prepare DeepSeek R1 if needed by callers
OPERATOR_P11_P1_BASELINE_FINDINGS.md:11:✓ Chat: Working (deepseek_api fallback, 3748 chars response)  
OPERATOR_P11_P1_BASELINE_FINDINGS.md:24:9. **.env.local Tracking** — MEDIUM — Not in .gitignore yet
OPERATOR_P11_P1_BASELINE_FINDINGS.md:25:10. **Timeout Hardcoding** — MEDIUM — deepseek_client.py has hardcoded 30s timeout
OPERATOR_P11_P1_BASELINE_FINDINGS.md:31:| B | .gitignore | Add `.env.local`, `.env.*.local` | Prevent accidental commits |
OPERATOR_P11_P1_BASELINE_FINDINGS.md:32:| B | docker-compose.override.yml | Add `env_file: .env.local` | Enable hot key rotation |
OPERATOR_P11_P1_BASELINE_FINDINGS.md:34:| C | deepseek_client.py | Add message validation + timeout config | Prevent payload explosions |
switch/scoring_engine.py:33:        "deepseek_auto": {
switch/providers/__init__.py:74:        api_key: Optional[str] = None,
switch/providers/__init__.py:75:        endpoint: str = "https://api.deepseek.com/v1/chat/completions",
switch/providers/__init__.py:77:        self.api_key = api_key or os.environ.get("DEEPSEEK_API_KEY")
switch/providers/__init__.py:79:        self.model = "deepseek-reasoner"
switch/providers/__init__.py:90:        if not self.api_key:
switch/providers/__init__.py:94:                provider="deepseek_r1",
switch/providers/__init__.py:99:                error="missing_api_key",
switch/providers/__init__.py:107:                        "Authorization": f"Bearer {self.api_key}",
switch/providers/__init__.py:130:                    provider="deepseek_r1",
switch/providers/__init__.py:143:                provider="deepseek_r1",
switch/providers/__init__.py:155:                provider="deepseek_r1",
switch/providers/__init__.py:167:                provider="deepseek_r1",
switch/providers/__init__.py:239:            "deepseek_r1": DeepSeekR1Provider(),
switch/providers/__init__.py:247:        # Priority: explicit flag > mock mode > deepseek > local
switch/providers/__init__.py:248:        if os.environ.get("VX11_MOCK_PROVIDERS") == "true":
switch/providers/__init__.py:250:        return os.environ.get("VX11_DEEPSEEK_PROVIDER", "local")
switch/main.py:76:DEEPSEEK_API_KEY = getattr(settings, "deepseek_api_key", None)
switch/main.py:529:    env_path = os.environ.get("VX11_DB_PATH")
switch/main.py:536:    repo_root = os.environ.get("VX11_REPO_ROOT") or os.path.abspath(
switch/main.py:710:        engine_ids=["local_gguf", "deepseek_r1", "cli", "shub"],
switch/main.py:1329:    testing_mode_flag = getattr(settings, "testing_mode", False) or os.environ.get(
switch/main.py:1337:        elif model_name in ("deepseek", "hermes", "local", "deepseek_r1"):
switch/main.py:2023:    power_key = os.environ.get("VX11_POWER_KEY")
switch/main.py:2183:    if settings.testing_mode or os.environ.get("VX11_TESTING") in ("1", "true", "yes"):
switch/ga_optimizer.py:96:        self.engine_ids = engine_ids or ["local_gguf", "deepseek_r1", "cli", "shub"]
switch/hermes/scanner_v2.py:189:            from config.deepseek import call_deepseek_reasoner_async
switch/hermes/scanner_v2.py:197:            result, latency, conf = await call_deepseek_reasoner_async(
switch/hermes/registry_manager.py:42:            name: nombre único del motor (ej. "ollama-llama2", "deepseek-api", "docker")
switch/hermes/main.py:130:    if os.environ.get("VX11_AUDIT_DIR"):
switch/hermes/main.py:131:        return os.environ["VX11_AUDIT_DIR"]
switch/hermes/main.py:526:def _get_deepseek_token() -> Optional[str]:
switch/hermes/main.py:529:    token = get_token("DEEPSEEK_API_KEY") or settings.deepseek_api_key
switch/hermes/main.py:533:@app.post("/hermes/overwrite_from_deepseek")
switch/hermes/main.py:534:async def overwrite_from_deepseek(
switch/hermes/main.py:536:    deepseek_id: Optional[str] = None,
switch/hermes/main.py:544:    token = _get_deepseek_token()
switch/hermes/main.py:548:    url_id = deepseek_id or name
switch/hermes/main.py:554:                f"{settings.deepseek_base_url.rstrip('/')}/models/{url_id}"
switch/hermes/main.py:581:            "source": "deepseek",
switch/hermes/main.py:586:        raise HTTPException(status_code=502, detail=f"deepseek_error:{e}")
switch/hermes/main.py:588:        write_log("hermes", f"deepseek_overwrite_error:{e}", level="ERROR")
switch/hermes/main.py:754:        "name": "deepseek_r1",
switch/hermes/main.py:755:        "base_url": "https://api.deepseek.com/v1",
switch/hermes/main.py:756:        "api_key_env": "DEEPSEEK_API_KEY",
switch/hermes/main.py:776:        provider.api_key_env = body.get("api_key_env", "")
switch/hermes/cli_registry.py:28:    DEEPSEEK_R1 = "deepseek_r1"
switch/hermes/cli_registry.py:68:    token_name: Optional[str] = None  # nombre de token en tokens.env
switch/hermes/cli_registry.py:94:                name="deepseek_r1",
switch/hermes/cli_registry.py:97:                model_name="deepseek-r1",
switch/hermes/cli_selector.py:165:            fallbacks = ["gpt4", "deepseek_r1"]  # Default fallbacks si local falla
switch/hermes/models_catalog.json:53:            "name": "deepseek_r1",
switch/hermes/models_catalog.json:54:            "base_url": "https://api.deepseek.com/v1",
switch/hermes/models_catalog.json:55:            "api_key_env": "DEEPSEEK_API_KEY",
switch/hermes/models_catalog.json:69:            "api_key_env": "OPENROUTER_API_KEY",
switch/hermes/model_scanner.py:17:from config import deepseek
switch/hermes/model_scanner.py:246:            resp = await deepseek.call_deepseek_reasoner(prompt, timeout=30.0)
switch/ga_population.json:7:      "deepseek_r1": 0.38654596900317584,
switch/ga_population.json:25:        "deepseek_r1": 0.38654596900317584,
switch/ga_population.json:42:        "deepseek_r1": 0.09990944057587058,
switch/ga_population.json:59:        "deepseek_r1": 0.5919047825066477,
switch/ga_population.json:76:        "deepseek_r1": 0.11715454961527624,
switch/ga_population.json:93:        "deepseek_r1": 0.3875865227777598,
switch/ga_population.json:110:        "deepseek_r1": 0.38173674369791133,
switch/ga_population.json:127:        "deepseek_r1": 0.09570783486893315,
switch/ga_population.json:144:        "deepseek_r1": 0.35070634412507623,
switch/ga_population.json:161:        "deepseek_r1": 0.31496517893334647,
switch/ga_population.json:178:        "deepseek_r1": 0.3376580870508518,
switch/warm_up_config.json:14:      "name": "deepseek_r1",
switch/adapters.py:10:from config import deepseek
switch/adapters.py:26:async def deepseek_call(payload: Any, context: Dict[str, Any] | None = None, **opts) -> Dict[str, Any]:
switch/adapters.py:29:    write_log("switch.adapters", f"deepseek_call:start:len={len(prompt)}")
switch/adapters.py:31:        resp = await asyncio.to_thread(deepseek.call_deepseek, prompt, opts)
switch/adapters.py:33:        return {"ok": False, "engine": "deepseek", "error": str(e)}
switch/adapters.py:36:        write_log("switch.adapters", "deepseek_call:ok")
switch/adapters.py:37:        return {"ok": True, "engine": "deepseek", "result": resp.get("result"), "latency_ms": latency}
switch/adapters.py:38:    write_log("switch.adapters", f"deepseek_call:error:{resp.get('error')}")
switch/adapters.py:39:    return {"ok": False, "engine": "deepseek", "error": resp.get("error"), "latency_ms": latency}
switch/adapters.py:109:        res = await asyncio.to_thread(deepseek.call_deepseek, prompt, {"purpose": "gemini_cli"})
switch/adapters.py:203:    "deepseek": deepseek_call,
switch/adapters.py:260:    ds_key = getattr(settings, "deepseek_api_key", None)
switch/adapters.py:263:            res = await asyncio.to_thread(deepseek.call_deepseek, f"Choose best provider for: {prompt}", {"purpose": "switch_select"}, 10.0)
switch/adapters.py:271:            write_log("switch.adapters", f"select_provider:deepseek_err:{str(e)}")
switch/adapters.py:276:    return "deepseek"
switch/adapters.py:320:        "deepseek": deepseek_call,
switch/adapters.py:377:        ds_key = getattr(settings, "deepseek_api_key", None)
switch/adapters.py:378:        # If deepseek available, ask it for reasoning
switch/adapters.py:381:                res = await asyncio.to_thread(deepseek.call_deepseek, f"Choose best provider for: {prompt}", {"purpose": "switch_select"}, 10.0)
switch/adapters.py:389:                write_log("switch.adapters", f"select_provider:deepseek_err:{str(e)}")
switch/adapters.py:393:        return "deepseek"
switch/deepseek_r1_provider.py:13:    def __init__(self, api_key: str = None, base_url: str = None):
switch/deepseek_r1_provider.py:14:        self.api_key = api_key or ""
switch/deepseek_r1_provider.py:15:        self.base_url = base_url or "https://api.deepseek.com/v1"
switch/deepseek_r1_provider.py:16:        self.model = "deepseek-r1"
switch/deepseek_r1_provider.py:25:        if not self.api_key:
switch/deepseek_r1_provider.py:49:                        "Authorization": f"Bearer {self.api_key}",
switch/deepseek_r1_provider.py:78:        if not self.api_key:
switch/deepseek_r1_provider.py:98:                        "Authorization": f"Bearer {self.api_key}",
switch/warm_up.py:68:                    "name": "deepseek_r1",
switch/pheromones.json:9:    "deepseek_auto": {
madre/builder_sandbox.py:29:    env = os.environ.copy()
madre/power_manager.py:24:REPO_ROOT = os.environ.get("VX11_REPO_ROOT") or "/home/elkakas314/vx11"
madre/power_manager.py:51:VX11_ALLOW_SERVICE_CONTROL = os.environ.get(
madre/power_manager.py:54:MAINTENANCE_WINDOW_ENABLED = os.environ.get(
madre/power_manager.py:272:    db_path = os.environ.get("VX11_DB_PATH") or os.path.join(
madre/power_manager.py:694:      -H "X-VX11-POWER-TOKEN: $(cat /etc/vx11/tokens.env | grep TOKEN)" \
madre/power_manager.py:726:    key_ok = bool(os.environ.get("VX11_POWER_KEY")) and key_header == os.environ.get(
madre/power_manager.py:835:    key_ok = bool(os.environ.get("VX11_POWER_KEY")) and key_header == os.environ.get(
madre/README.md:119:ControlResponse(status=pending_confirmation, token=...)
madre/README.md:121:Usuario: POST /madre/plans/{id}/confirm token=...
madre/llm/deepseek_client.py:16:log = logging.getLogger("vx11.madre.llm.deepseek")
madre/llm/deepseek_client.py:19:def get_deepseek_api_key() -> Optional[str]:
madre/llm/deepseek_client.py:22:        os.environ.get("DEEPSEEK_API_KEY")
madre/llm/deepseek_client.py:23:        or os.environ.get("DEEPSEEK_KEY")
madre/llm/deepseek_client.py:24:        or os.environ.get("VX11_DEEPSEEK_API_KEY")
madre/llm/deepseek_client.py:28:async def call_deepseek_r1(
madre/llm/deepseek_client.py:42:        - provider: "deepseek" | "error"
madre/llm/deepseek_client.py:43:        - model: "deepseek-reasoner"
madre/llm/deepseek_client.py:46:    api_key = get_deepseek_api_key()
madre/llm/deepseek_client.py:48:    if not api_key:
madre/llm/deepseek_client.py:60:                "https://api.deepseek.com/v1/chat/completions",
madre/llm/deepseek_client.py:62:                    "Authorization": f"Bearer {api_key}",
madre/llm/deepseek_client.py:66:                    "model": "deepseek-reasoner",
madre/llm/deepseek_client.py:83:                "provider": "deepseek_error",
madre/llm/deepseek_client.py:84:                "model": "deepseek-reasoner",
madre/llm/deepseek_client.py:97:                "provider": "deepseek_error",
madre/llm/deepseek_client.py:98:                "model": "deepseek-reasoner",
madre/llm/deepseek_client.py:105:            "provider": "deepseek",
madre/llm/deepseek_client.py:106:            "model": "deepseek-reasoner",
madre/llm/deepseek_client.py:114:            "provider": "deepseek_timeout",
madre/llm/deepseek_client.py:115:            "model": "deepseek-reasoner",
madre/llm/deepseek_client.py:123:            "provider": "deepseek_exception",
madre/llm/deepseek_client.py:124:            "model": "deepseek-reasoner",
madre/llm/deepseek_client.py:129:def is_deepseek_available() -> bool:
madre/llm/deepseek_client.py:131:    return bool(get_deepseek_api_key())
madre/main.py:39:from .llm.deepseek_client import call_deepseek_r1, is_deepseek_available
madre/main.py:188:        if is_deepseek_available():
madre/main.py:191:                deepseek_result = await call_deepseek_r1(
madre/main.py:195:                if deepseek_result["status"] == "DONE":
madre/main.py:198:                        response=deepseek_result["response"],
madre/main.py:204:                        provider=deepseek_result["provider"],  # "deepseek"
madre/main.py:205:                        model=deepseek_result["model"],  # "deepseek-reasoner"
madre/main.py:213:                        notes=f"Processed via {deepseek_result['provider']}",
madre/main.py:219:                        f"DeepSeek degraded/error: {deepseek_result['status']}, falling back to MADRE"
madre/main.py:221:                    warnings.append(f"deepseek_fallback:{deepseek_result['status']}")
madre/main.py:225:                warnings.append("deepseek_exception")
madre/main.py:389:                confirm_token=confirm_token,
madre/main.py:791:USE_LEGACY = os.environ.get("VX11_USE_LEGACY_APP", "").lower() in ("1", "true", "yes")
madre/main.py:796:        os.environ.setdefault("VX11_TEST_IMPORT_SAFE", "1")
madre/core/models.py:115:    provider: Optional[str] = None  # "deepseek" | "fallback_local" | etc
madre/core/models.py:116:    model: Optional[str] = None  # "deepseek-reasoner" | "local" | etc
madre/routes_power.py:42:            or os.environ.get("VX11_TENTACULO_LINK_TOKEN")
madre/routes_power.py:43:            or os.environ.get("VX11_TOKEN")
madre/routes_power.py:118:    timeout_sec = int(os.environ.get("VX11_POWER_WINDOWS_TIMEOUT_SEC", 30))
madre/routes_power.py:205:    timeout_sec = int(os.environ.get("VX11_POWER_WINDOWS_TIMEOUT_SEC", 30))
madre/main_v7_production.py:273:                confirm_token=confirm_token,
madre/power_saver.py:12:        os.environ.get("VX11_REPO_ROOT")
madre/power_saver.py:13:        or os.environ.get("BASE_PATH")
madre/power_saver.py:22:    if os.environ.get("VX11_AUDIT_DIR"):
madre/power_saver.py:23:        return os.environ["VX11_AUDIT_DIR"]
madre/power_saver.py:275:    if os.environ.get("VX11_DB_PATH"):
madre/power_saver.py:276:        return os.environ["VX11_DB_PATH"]
madre/power_saver.py:312:        raw = os.environ.get(name)
madre/power_saver.py:322:            os.environ.get("VX11_RETENTION_PROFILE")
madre/power_saver.py:323:            or os.environ.get("VX11_POWER_PROFILE")
madre/power_saver.py:324:            or os.environ.get("VX11_POWER_MODE")
madre/power_saver.py:328:        if os.environ.get("ULTRA_LOW_MEMORY", "").strip().lower() in ("1", "true", "yes", "on"):
madre/power_saver.py:338:        if env_name in os.environ:
attic/operador_ui/src/main.tsx:40:  const details = (import.meta as any).env?.DEV ? stack : "Inicialización fallida";
madre/main_legacy.py:724:    base = os.environ.get("VX11_AUDIT_DIR") or "/app/logs/audit"
madre/main_legacy.py:1041:    task_id = req.name or f"task-{uuid.uuid4().hex[:8]}"
madre/main_legacy.py:1427:    task_uuid = task_uuid or f"task-{uuid.uuid4().hex[:8]}"
madre/main_legacy.py:1989:        "power_mode": settings.environment,
VX11_CONTEXT.md:107:- Prohibido tocar/mover: `docker-compose.yml`, `sitecustomize.py`, `tokens.env*`, `.vscode/`, `.devcontainer/`, `*.code-workspace`.
docs/shub2.txt:40:        tokens_path = VX11_ROOT / "tokens.env"
attic/operador_ui/src/config/vx11.config.ts:21:    operator_backend: (import.meta as any).env?.VITE_OPERATOR_BACKEND_URL ?? "http://operator:8011",
attic/operador_ui/src/services/chat-api.ts:12:  const value = (import.meta as any).env?.[key];
attic/PHASE4_CLOSURE_REPORT.txt:22:    - /switch/task   → Same logic with task-specific routing_events logging
attic/PHASE4_CLOSURE_REPORT.txt:27:    - DeepSeek R1 auto-enrollment when deepseek_base_url configured
attic/PHASE4_CLOSURE_REPORT.txt:38:    • test_deepseek_registration                       PASSED
attic/manifestator/patch_generator_v2.py:111:            extensions = {".env", ".json", ".yml", ".yaml"}
attic/manifestator/main.py:20:from config import deepseek
attic/manifestator/main.py:481:        result, latency_ms, confidence = await deepseek.call_deepseek_reasoner_async(
attic/manifestator/autopatcher_v2.py:26:from config.deepseek import call_deepseek_reasoner_async
attic/manifestator/autopatcher_v2.py:155:        reasoning = await call_deepseek_reasoner_async(
attic/manifestator/auto_patcher.py:21:def _ensure_deepseek_env(repo_root: Path = REPO_ROOT) -> bool:
attic/manifestator/auto_patcher.py:22:    """Load DEEPSEEK_API_KEY from tokens.env if not already exported."""
attic/manifestator/auto_patcher.py:23:    if os.environ.get("DEEPSEEK_API_KEY"):
attic/manifestator/auto_patcher.py:25:    env_path = repo_root / "tokens.env"
attic/manifestator/auto_patcher.py:37:                os.environ.setdefault("DEEPSEEK_API_KEY", value.strip().strip('"').strip("'"))
attic/manifestator/auto_patcher.py:51:        _ensure_deepseek_env(repo_root)  # prepare DeepSeek R1 if needed by callers
attic/conftest.py:324:    return {"status": "healthy", "module": "switch", "providers": ["local", "deepseek"]}
attic/conftest.py:486:    if "CI" in os.environ or "GITHUB_ACTIONS" in os.environ:
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:119:Un desarrollador accidentalmente commiteó `.env` con secrets. GitHub Actions detectó. Necesitas investigar.
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:134:  ❌ CRITICAL: .env tracked in git
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:139:  ❌ HIGH: tokens.env NOT in .gitignore
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:145:     - deepseek.py uses env vars (correct)
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:151:  2. Remove .env from git history: 
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:152:     git filter-branch --tree-filter 'rm -f .env' -- --all
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:153:  3. Add to .gitignore: *.env, *.env.local, tokens.env
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:166:  (Will remove .env from tracking, update .gitignore, validate)
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:273:  ID: task-a1b2c3d4e5f6
attic/docs/VX11_OPERATOR_AGENT_EXAMPLES.md:445:   └─→ @vx11-operator-lite use deepseek: question ($0.50+, 30s)
attic/docs/COPILOT_INSTRUCTIONS_QUICK_GUIDE.md:186:- `tokens.env.master` or `tokens.env` (secrets)
attic/docs/OPERATOR_VX11_V8_1_EXTENSIONS.md:222:- `tokens.env`
docs/archive/COMPLETION_SUMMARY.md:93:7. **`.env.example`** (120 líneas)
docs/archive/COMPLETION_SUMMARY.md:113:8. **`tokens.env.sample`** (180 líneas)
docs/archive/COMPLETION_SUMMARY.md:136:   - Secrets: `tokens.env`, `.env`, `*.pem`, `*.key`
docs/archive/COMPLETION_SUMMARY.md:187:| `.env.example` | 120 | ✅ Creado |
docs/archive/COMPLETION_SUMMARY.md:188:| `tokens.env.sample` | 180 | ✅ Actualizado |
docs/archive/COMPLETION_SUMMARY.md:269:| **A.3** | Ficheros config | ✅ Completo | .env.example, tokens.env.sample, .gitignore |
docs/archive/COMPLETION_SUMMARY.md:292:.env.example                            (+120 líneas)
docs/archive/COMPLETION_SUMMARY.md:299:tokens.env.sample                       (Actualizado, ~180 líneas)
docs/archive/COMPLETION_SUMMARY.md:325:1. ✅ **Segura**: tokens.env.sample con placeholders
docs/archive/COMPLETION_SUMMARY.md:328:4. ✅ **Ejemplo**: .env.example con valores por defecto
docs/archive/COMPLETION_SUMMARY.md:343:cp tokens.env.sample tokens.env
docs/archive/COMPLETION_SUMMARY.md:344:vim tokens.env  # Agregar DEEPSEEK_API_KEY, etc.
attic/docs/VX11_HORMIGUERO_v7_COMPLETION.md:517:  -H "X-VX11-Token: $(cat tokens.env | grep VX11_GATEWAY_TOKEN | cut -d= -f2)"
attic/docs/ROADMAP_CANONICAL_PHASE_FINAL.md:207:4. **NO tocar** `tokens.env` ni `docker-compose.yml`
attic/docs/OPERATOR_UI_RUNTIME.md:20:**File:** `.env.local` (gitignored)
attic/docs/OPERATOR_UI_RUNTIME.md:396:- [ ] `VITE_OPERATOR_API_URL=http://localhost:8011` in .env.local
attic/docs/SHUBNIGGURATH_COMPLETE.md:46:cp tokens.env.sample tokens.env
attic/docs/SHUBNIGGURATH_COMPLETE.md:47:vim tokens.env  # Set DEEPSEEK_API_KEY if using R1
attic/docs/SHUBNIGGURATH_COMPLETE.md:259:DEEPSEEK_API_KEY=sk-xxx
docs/archive/ADAPTIVE_OPTIMIZATION_PHASE1_REPORT.md:128:        "providers": ["openrouter", "deepseek", "hermes"],
docs/archive/ADAPTIVE_OPTIMIZATION_PHASE1_REPORT.md:133:        "providers": ["deepseek", "openrouter"],
attic/docs/audit/cleanup_20251217T191923Z/01_commit_operator.txt:32: rename {operator_backend => attic/operator_backend}/frontend/.env.example (100%)
docs/archive/DOCUMENTATION_INDEX.md:212:### 10. **.env.example** (120 líneas)
docs/archive/DOCUMENTATION_INDEX.md:238:### 11. **tokens.env.sample** (180 líneas)
docs/archive/DOCUMENTATION_INDEX.md:267:- Secrets (`tokens.env`, `.env`, `*.pem`, `*.key`)
docs/archive/DOCUMENTATION_INDEX.md:297:| .env.example | 120 | Configuración |
docs/archive/DOCUMENTATION_INDEX.md:298:| tokens.env.sample | 180 | Tokens |
docs/archive/DOCUMENTATION_INDEX.md:344:- .env.example (120+ variables)
docs/archive/DOCUMENTATION_INDEX.md:345:- tokens.env.sample (tokens + guía de seguridad)
docs/archive/DOCUMENTATION_INDEX.md:364:| **DevOps** | FINAL_COMMANDS.md | .env.example | COMPLETION_SUMMARY.md |
docs/archive/DOCUMENTATION_INDEX.md:473:2. Configura: **.env.example** + **tokens.env.sample**
attic/docs/BLOQUE_F_FINAL_VALIDATION_v7_1.md:117:✅ All from settings or .env
docs/archive/OPERATOR_MODE_SUMMARY.md:377:      "task_id": "task-001",
attic/docs/VX11_OPERATOR_AGENT_MANUAL.md:67:| **Lite** | `use deepseek: task` | $0.10-0.50 | 30s | Optional reasoning |
attic/docs/VX11_OPERATOR_AGENT_MANUAL.md:159:@vx11-operator-lite use deepseek: Should I refactor this?
attic/docs/VX11_OPERATOR_AGENT_MANUAL.md:289:3. Tokens: Verifica tokens.env, tokens.env.master no tracked
attic/docs/VX11_OPERATOR_AGENT_MANUAL.md:292:   ✓ Only in .env (correct)
attic/docs/VX11_OPERATOR_AGENT_MANUAL.md:325:- .env accidentalmente commiteado
attic/docs/VX11_OPERATOR_AGENT_MANUAL.md:334:  2. Add to .env (NOT tracked)
attic/docs/VX11_OPERATOR_AGENT_MANUAL.md:433:4. **Use DeepSeek selectively** (Lite + `use deepseek` cuando REALMENTE necesites reasoning)
attic/docs/ARCHITECTURE.md:237:Ver `.env.example` y `tokens.env.sample` para variables completas.
attic/docs/ARCHITECTURE.md:325:- Secrets: `tokens.env` (no comitear).
attic/docs/ARCHITECTURE.md:337:│   ├── deepseek.py
attic/docs/ARCHITECTURE.md:358:├── .env.example
attic/docs/ARCHITECTURE.md:359:├── tokens.env.sample
docs/archive/FASES_1_TO_8_IMPLEMENTATION.md:34:  - Registra engines predefinidos: ollama-llama2, deepseek-r1, cli-docker/kubectl/git/curl
docs/archive/FASES_1_TO_8_IMPLEMENTATION.md:290:        │ ├─ deepseek-r1 (remote_llm)          │
attic/docs/MADRE_PRODUCTION_v7_HARDENING_REPORT.md:326:User must call: POST /madre/plans/{plan_id}/confirm?confirm_token=<token>
docs/archive/VX11_v6_COMPLETION_REPORT.md:88:- Rastrea métricas por motor (hermes_local, deepseek, openrouter, etc.)
docs/archive/VX11_v6_COMPLETION_REPORT.md:111:  - HIGH-PERF: 15s timeout, 8 concurrent, fallback=[deepseek]
docs/archive/VX11_v6_COMPLETION_REPORT.md:355:    engine="deepseek",
attic/docs/SHUB_API_EXAMPLES.md:387:grep VX11_GATEWAY_TOKEN /home/elkakas314/vx11/tokens.env
docs/archive/QUICK_REFERENCE.md:11:cp tokens.env.sample tokens.env
docs/archive/QUICK_REFERENCE.md:12:vim tokens.env  # Agregar DEEPSEEK_API_KEY
docs/archive/QUICK_REFERENCE.md:130:source tokens.env
docs/archive/QUICK_REFERENCE.md:132:docker-compose up -d --env-file tokens.env
docs/archive/QUICK_REFERENCE.md:176:- Tokens en `tokens.env` (no comitear)
docs/archive/QUICK_REFERENCE.md:242:  -d '{"query":"Calcula 2+2","available_engines":["hermes_local","deepseek"]}'
docs/archive/QUICK_REFERENCE.md:260:- `HIGH-PERF`: Cloud engines, 15s timeout (fallback: deepseek)
attic/docs/AUDITORIA_ESTRUCTURA_VX11_v7_1_COMPLETA.md:325:├── deepseek.py ................... VIGENTE (LLM integration)
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:63:- 2 CLI providers (deepseek_r1, openrouter)
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:91:  - `deepseek_api_key`: From tokens.env
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:92:  - `deepseek_base_url`: "https://api.deepseek.com/v1"
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:93:  - `deepseek_daily_limit_tokens`: 100000 (configurable)
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:94:  - `deepseek_monthly_limit_tokens`: 3000000
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:95:  - `deepseek_reset_hour_utc`: 0 (UTC reset)
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:123:   - test_deepseek_settings_exist
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:235:- [ ] Set `DEEPSEEK_API_KEY` in tokens.env
attic/docs/VX11_SWITCH_HERMES_EXECUTION_SUMMARY.md:324:1. Load DEEPSEEK_API_KEY into tokens.env
attic/docs/HORMIGUERO_UI_CANONICAL.md:442:# .env or docker-compose.yml
attic/docs/AUDIT_SWITCH_HERMES_v7.md:73:  - `CliProviders`: versión mejorada de ModelsRemoteCLI con `api_key_env`, `daily_limit_tokens`, `monthly_limit_tokens`, etc.
attic/docs/AUDIT_SWITCH_HERMES_v7.md:80:  - `deepseek_api_key: Optional[str] = None` (pero no se inicializa desde tokens.env)
attic/docs/AUDIT_SWITCH_HERMES_v7.md:86:  - Lectura explícita de `DEEPSEEK_API_KEY` desde `tokens.env` vía BaseSettings
attic/docs/AUDIT_SWITCH_HERMES_v7.md:134:- Leer `tokens.env` → `deepseek_api_key` en settings
docs/archive/AUDITORIA_FORENSE_FASE1_COMPLETA.md:861:├── tokens.env                   (Configuración de seguridad)
docs/archive/AUDITORIA_FORENSE_FASE1_COMPLETA.md:983:   - tokens.env es canonical
docs/archive/AUDITORIA_FORENSE_FASE1_COMPLETA.md:1136:   - tokens.env: JAMÁS comitear en git
docs/archive/AUDITORIA_FORENSE_FASE1_COMPLETA.md:1137:   - .env variables dispersas: consolidar antes de cambios
attic/docs/DEEP_SURGEON_VX11_v7_FINAL_COMPLETION.md:455:├─ ✅ Tokens: tokens.env populated (DEEPSEEK_API_KEY, OPENAI_API_KEY, VX11_GATEWAY_TOKEN)
attic/docs/VX11_v7_1_DOCUMENTATION_INDEX.md:122:source tokens.env
attic/docs/VX11_v7_1_DOCUMENTATION_INDEX.md:175:- `tokens.env` — Required secrets
attic/docs/DOCKER_PERFORMANCE_VX11_v7.md:94:.env
attic/docs/DOCKER_PERFORMANCE_VX11_v7.md:95:tokens.env
attic/docs/API_REFERENCE.md:146:        "name": "deepseek",
attic/docs/API_REFERENCE.md:147:        "model": "deepseek-r1",
attic/docs/API_REFERENCE.md:171:        "preferred_provider": "deepseek",
attic/docs/API_REFERENCE.md:194:    "selected_provider": "deepseek",
attic/docs/API_REFERENCE.md:195:    "model": "deepseek-r1",
attic/docs/VX11_AGENT_DEFINITION_v7.1_DELIVERED.md:20:deepseek-mode: "user-explicit-only"
attic/docs/VX11_AGENT_DEFINITION_v7.1_DELIVERED.md:69:Prioridad 1: user_explicit_model == "deepseek"
attic/docs/VX11_AGENT_DEFINITION_v7.1_DELIVERED.md:184:- ✅ Control de costos: DeepSeek solo con `@vx11 use deepseek: ...`
attic/docs/VX11_OPERATOR_v7_FULL_COMPLETION.md:213:source tokens.env  # Load VX11_GATEWAY_TOKEN, DEEPSEEK_API_KEY, etc.
attic/docs/VX11_OPERATOR_v7_FULL_COMPLETION.md:338:    tool_name="deepseek_r1",
attic/docs/VX11_OPERATOR_v7_FULL_COMPLETION.md:416:  -H "X-VX11-Token: $(cat tokens.env | grep VX11_GATEWAY_TOKEN | cut -d= -f2)" \
attic/docs/CLEANUP_D_E_COMPLETION_REPORT.md:103:  - tokens.env.sample (template)
attic/docs/CLEANUP_D_E_COMPLETION_REPORT.md:195:- ✅ Tokens/secrets (tokens.env no tocado)
docs/archive/NIST_COMPLIANCE_REPORT_v6.2.md:74:- **Confidential:** API keys (tokens.env), auth tokens, context-7 user data
docs/archive/NIST_COMPLIANCE_REPORT_v6.2.md:114:- Tokens: `tokens.env` (git-ignored, not in repo)
docs/archive/NIST_COMPLIANCE_REPORT_v6.2.md:286:- Storage: Environment variables only (tokens.env)
docs/archive/NIST_COMPLIANCE_REPORT_v6.2.md:372:1. ✅ Approved API keys in tokens.env
docs/archive/NIST_COMPLIANCE_REPORT_v6.2.md:423:- [ ] Populate tokens.env with production API keys
docs/archive/ADAPTIVE_OPTIMIZATION.md:107:  "preferred_providers": ["openrouter", "deepseek", "hermes"],
docs/archive/ADAPTIVE_OPTIMIZATION.md:123:  "preferred_providers": ["deepseek", "openrouter"],
docs/archive/ADAPTIVE_OPTIMIZATION.md:156:    "preferred_providers": ["openrouter", "deepseek", "hermes"],
attic/docs/shub_specs/shub2.txt:40:        tokens_path = VX11_ROOT / "tokens.env"
docs/archive/ADAPTIVE_OPTIMIZATION_QUICK_START.md:97:0.60-0.85    HIGH-PERF      8        15s      [openrouter, deepseek, hermes]
docs/archive/ADAPTIVE_OPTIMIZATION_QUICK_START.md:98:0.85-1.00    CRITICAL       16       30s      [deepseek, openrouter]
docs/archive/RELEASE_NOTES_v4.md:34:- Soporta todos los providers: deepseek, deepseek-r1, hermes_cli, local_hf, local_llm_fallback
attic/docs/DEEP_SURGEON_FASE_3_OPERATOR_BACKEND_v7_COMPLETE.md:514:- [ ] Ensure tokens.env has VX11_GATEWAY_TOKEN
attic/docs/AUDITORIA_VX11_ESTRUCTURA_COMPLETA_v7.md:131:2. `POST /switch/task` → routing task-specific → retorna resultado
docs/archive/DEVELOPMENT.md:38:   cp tokens.env.sample tokens.env
docs/archive/DEVELOPMENT.md:39:   cp .env.example .env
docs/archive/DEVELOPMENT.md:40:   # Editar .env y tokens.env con valores reales (DEEPSEEK_API_KEY, etc.)
docs/archive/DEVELOPMENT.md:124:│   ├── deepseek.py          # Integración R1 Deepseek
docs/archive/DEVELOPMENT.md:143:├── .env.example
docs/archive/DEVELOPMENT.md:144:├── tokens.env.sample
attic/docs/FASE_1_RESUMEN_EJECUCION.md:133:- ✅ Config-driven: settings.py, tokens.env
attic/docs/VX11_v6.4_ANTI_CAOS_REPORT.md:6:  - `manifestator/auto_patcher.py`: traduce INTENT → patch quirúrgico, prepara DEEPSEEK_API_KEY leyendo `tokens.env` sin exponerlo.
attic/docs/VX11_v6.4_ANTI_CAOS_REPORT.md:26:  - `manifestator/auto_patcher._ensure_deepseek_env` lee `tokens.env` para poblar `DEEPSEEK_API_KEY` si no está en entorno; no loguea el valor.
attic/docs/VX11_v6.4_ANTI_CAOS_REPORT.md:27:  - Uso opcional: disponible para razonamiento avanzado vía `config.deepseek` sin exponer tokens.
docs/archive/OPERATOR_AUDIT_v6_4.md:196:        "model": "deepseek",
docs/archive/OPERATOR_AUDIT_v6_4.md:254:    "active_model": "deepseek-r1",
docs/archive/OPERATOR_AUDIT_v6_4.md:303:        "name": "deepseek-r1",
docs/archive/OPERATOR_AUDIT_v6_4.md:587:│  │ │  ├─ feedback: deepseek │ │  CPU:45% Mem:128MB          │
docs/archive/OPERATOR_AUDIT_v6_4.md:593:│  │ Active: deepseek-r1      │ Local:                       │
docs/archive/OPERATOR_AUDIT_v6_4.md:597:│  │ Mode: BALANCED           │  ├─ deepseek-r1 [7.0GB]     │
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:145:- CLI providers: deepseek_r1, openrouter (configurables)
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:156:  name VARCHAR(100) UNIQUE NOT NULL,          -- "deepseek_r1"
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:157:  base_url VARCHAR(500),                      -- "https://api.deepseek.com/v1"
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:158:  api_key_env VARCHAR(100) NOT NULL,          -- "DEEPSEEK_API_KEY"
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:231:deepseek_base_url: str = "https://api.deepseek.com/v1"
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:232:deepseek_daily_limit_tokens: int = 100000
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:233:deepseek_monthly_limit_tokens: int = 3000000
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:234:deepseek_reset_hour_utc: int = 0
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:242:base_url = settings.deepseek_base_url
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:243:daily_limit = settings.deepseek_daily_limit_tokens
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:245:# Leer token desde entorno (.env o tokens.env)
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:246:api_key = settings.deepseek_api_key  # Desde DEEPSEEK_API_KEY env var
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:345:#   "provider": "deepseek_r1" o "general-7b",
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:377:async def register_deepseek():
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:385:                "name": "deepseek_r1",
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:386:                "base_url": "https://api.deepseek.com/v1",
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:387:                "api_key_env": "DEEPSEEK_API_KEY",
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:450:1. **Activar DEEPSEEK_API_KEY:** Cargar token en `tokens.env` para usar CLI real
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:477:Automático a las 00:00 UTC (configurable en `settings.py: deepseek_reset_hour_utc`).
attic/docs/VX11_SWITCH_HERMES_v7_COMPLETION.md:536:- [x] Cargable desde tokens.env vía BaseSettings
docs/archive/SHUB_REESCRITURA_FINAL.md:231:- ✅ tokens.env - Sin tocar
docs/archive/ARCHITECTURE_v4.md:71:│   ├── deepseek.py          (R1 integration)
docs/archive/ARCHITECTURE_v4.md:133:└── tokens.env
docs/archive/MANIFESTATOR_INTEGRATION.md:523:MANIFESTATOR_AI_PROVIDER = "deepseek"  # o "local"
docs/archive/MANIFESTATOR_INTEGRATION.md:549:# Asegurar que tokens.env está cargado
docs/archive/MANIFESTATOR_INTEGRATION.md:550:source tokens.env
docs/archive/MANIFESTATOR_INTEGRATION.md:554:docker-compose up -d --env-file tokens.env
attic/docs/docsset/shub2.txt:40:        tokens_path = VX11_ROOT / "tokens.env"
docs/archive/VX11_v7_DEPLOYMENT_READY.md:94:source tokens.env
docs/archive/VX11_v7_DEPLOYMENT_READY.md:114:curl -H "X-VX11-Token: $(cat tokens.env | grep VX11_GATEWAY_TOKEN | cut -d= -f2)" \
docs/archive/PHASE_14_INTEGRATION_GUIDE.md:160:  "engine_id": "deepseek_auto",
docs/archive/PHASE_14_INTEGRATION_GUIDE.md:221:      "engine": "deepseek_auto",
docs/archive/PHASE_14_INTEGRATION_GUIDE.md:474:- Config: `tokens.env` (copiar de `tokens.env.sample`)
docs/archive/COMPLETION_STATUS.md:89:  -d '{"query":"Calcula 2+2","available_engines":["hermes_local","deepseek"]}'
docs/archive/SHUB_FASE1_COMPLETION.md:185:   - `get_token("VX11_GATEWAY_TOKEN")` → load from .env/tokens.env
docs/archive/OPERATOR_AUDIT_v6_4_DIAGRAMS.md:404:│ │ Feedback: deepseek             │   │ │ [logs] [kill]                   │   │
docs/archive/OPERATOR_AUDIT_v6_4_DIAGRAMS.md:415:│ │ Active Model: deepseek-r1      │   │ 📚 MODELS (Hermes)                   │
docs/archive/OPERATOR_AUDIT_v6_4_DIAGRAMS.md:421:│ │ 1. [⚡] shub: audio_track_03   │   │ • deepseek-r1 [7.0GB]           │   │
docs/archive/VX11_CANON_v6.1.md:269:      "id": "deepseek_auto",
docs/archive/VX11_CANON_v6.1.md:506:  - .env*, tokens.env, vx11.code-workspace
docs/archive/SHUB_DEPLOYMENT_FINAL_REPORT.txt:43:    ✅ .env.shub                        — Environment
attic/docs/docsset/vx11_union.txt:11:├── 📁 switch/                 # 52113 - Router IA (local/deepseek/auto) + Hermes
attic/docs/docsset/vx11_union.txt:22:├── 📄 tokens.env              # Plantilla seguridad
attic/docs/docsset/vx11_union.txt:102:    openai_api_key: Optional[str] = None
attic/docs/docsset/vx11_union.txt:103:    deepseek_api_key: Optional[str] = None
attic/docs/docsset/vx11_union.txt:105:    default_model: str = "auto"  # auto, local, deepseek
attic/docs/docsset/vx11_union.txt:117:        env_file = ".env"
attic/docs/docsset/vx11_union.txt:222:    provider = Column(String(50))  # local, deepseek, openai, etc.
attic/docs/docsset/vx11_union.txt:224:    api_key = Column(String(200), nullable=True)
attic/docs/docsset/vx11_union.txt:326:    if client_host not in ["127.0.0.1", "localhost"] and settings.environment == "prod":
attic/docs/docsset/vx11_union.txt:459:        environment=settings.environment
attic/docs/docsset/vx11_union.txt:522:    if settings.environment == "dev":
attic/docs/docsset/vx11_union.txt:876:                (r'(local|remoto|deepseek).*modelo', 'route'),
attic/docs/docsset/vx11_union.txt:1004:            elif "deepseek" in text:
attic/docs/docsset/vx11_union.txt:1005:                specific_params["provider"] = "deepseek"
attic/docs/docsset/vx11_union.txt:1038:- [ ] **Switch** - Router IA (local/deepseek/auto) + Hermes
attic/docs/docsset/vx11_union.txt:1070:├── 📄 tokens.env              # Seguridad
attic/docs/docsset/vx11_union.txt:1956:- [ ] **Switch** - Router IA (local/deepseek/auto) + Hermes
attic/docs/docsset/vx11_union.txt:1988:├── 📄 tokens.env              # Seguridad
attic/docs/docsset/vx11_union.txt:2874:- [ ] **Switch** - Router IA (local/deepseek/auto) + Hermes
attic/docs/docsset/vx11_union.txt:2929:from switch.core.deepseek_client import DeepSeekClient
attic/docs/docsset/vx11_union.txt:2944:deepseek_client = DeepSeekClient()
attic/docs/docsset/vx11_union.txt:2949:    mode: str = "auto"  # auto, local, deepseek, hermes
attic/docs/docsset/vx11_union.txt:2993:        if provider == "deepseek":
attic/docs/docsset/vx11_union.txt:2994:            result = await deepseek_client.query(
attic/docs/docsset/vx11_union.txt:3147:    providers = ["deepseek", "local", "hermes"]
attic/docs/docsset/vx11_union.txt:3151:            if provider == "deepseek":
attic/docs/docsset/vx11_union.txt:3152:                result = await deepseek_client.query(
attic/docs/docsset/vx11_union.txt:3204:            "deepseek_client": "active"
attic/docs/docsset/vx11_union.txt:3208:            "deepseek": await deepseek_client.check_health(),
attic/docs/docsset/vx11_union.txt:3242:            "deepseek": 0.6,   # Balanceado
attic/docs/docsset/vx11_union.txt:3277:            # Alta complejidad -> deepseek para mejor calidad
attic/docs/docsset/vx11_union.txt:3278:            return "deepseek"
attic/docs/docsset/vx11_union.txt:3286:            # Por defecto usar deepseek
attic/docs/docsset/vx11_union.txt:3287:            return "deepseek"
attic/docs/docsset/vx11_union.txt:3348:# 📄 vx11_final/switch/core/deepseek_client.py
attic/docs/docsset/vx11_union.txt:3357:logger = logging.getLogger("deepseek_client")
attic/docs/docsset/vx11_union.txt:3363:        self.base_url = "https://api.deepseek.com/v1"
attic/docs/docsset/vx11_union.txt:3364:        self.api_key = settings.deepseek_api_key
attic/docs/docsset/vx11_union.txt:3365:        self.model = "deepseek-chat"
attic/docs/docsset/vx11_union.txt:3370:        if not self.api_key:
attic/docs/docsset/vx11_union.txt:3384:                    "Authorization": f"Bearer {self.api_key}",
attic/docs/docsset/vx11_union.txt:3417:        if not self.api_key:
attic/docs/docsset/vx11_union.txt:3418:            return "no_api_key"
attic/docs/docsset/vx11_union.txt:3429:                headers = {"Authorization": f"Bearer {self.api_key}"}
attic/docs/docsset/vx11_union.txt:4439:- `tokens.env` - Plantilla seguridad
attic/docs/docsset/vx11_union.txt:4440:- `.env.example` - Variables entorno
attic/docs/docsset/vx11_union.txt:4616:echo "   1. Edita tokens.env con tus claves API"
attic/docs/docsset/vx11_union.txt:4809:tar -czf "$BACKUP_DIR/config_$TIMESTAMP.tar.gz" config/ tokens.env .env 2>/dev/null || true
attic/docs/docsset/vx11_union.txt:5093:    "rest-client.environmentVariables": {
attic/docs/docsset/vx11_union.txt:5249:# 📄 vx11_final/tokens.env
attic/docs/docsset/vx11_union.txt:5252:DEEPSEEK_API_KEY=your_deepseek_key_here
attic/docs/docsset/vx11_union.txt:5268:# 📄 vx11_final/.env.example
attic/docs/docsset/vx11_union.txt:5269:# Plantilla de variables de entorno - Copiar a .env y ajustar
attic/docs/docsset/vx11_union.txt:5271:DEEPSEEK_API_KEY=your_actual_deepseek_key_here
attic/docs/docsset/vx11_union.txt:5641:  "model_used": "deepseek-chat",
attic/docs/docsset/vx11_union.txt:5642:  "provider": "deepseek",
attic/docs/docsset/vx11_union.txt:5773:# Editar tokens.env con tus claves reales
attic/docs/docsset/vx11_union.txt:5774:nano tokens.env
attic/docs/docsset/vx11_union.txt:5776:cp tokens.env .env
attic/docs/docsset/vx11_union.txt:5777:nano .env
attic/docs/docsset/vx11_union.txt:5789:Crear archivo `.env`:
attic/docs/docsset/vx11_union.txt:5797:DEEPSEEK_API_KEY=tu_deepseek_key
attic/docs/docsset/vx11_union.txt:6331:- 🔀 **Switch** (52113) - Router IA (local/deepseek/auto) + Hermes integration
attic/docs/docsset/vx11_union.txt:6353:- ✅ **Configuración**: tokens.env, .env.example, settings completos
attic/docs/docsset/vx11_union.txt:6380:├── 📄 tokens.env              # ✅ Seguridad
attic/docs/docsset/vx11_union.txt:6381:├── 📄 .env.example            # ✅ Plantilla
attic/docs/docsset/vx11_union.txt:6397:3. **Configurar** tus tokens en `tokens.env`
docs/archive/WORKSPACE_CLEANUP_REPORT.md:112:✅ README.md, requirements.txt, docker-compose.yml, .env.example, .gitignore, vx11.code-workspace, tokens.env, tokens.env.master, tokens.env.sample, START_HERE.md, QUICK_REFERENCE.md
docs/archive/SHUB_PRO_INTEGRATION_GUIDE.md:444:DEEPSEEK_API_KEY=sk-...
docs/archive/shub/shub2.txt:40:        tokens_path = VX11_ROOT / "tokens.env"
docs/archive/SHUBNIGGURATH_EXECUTION_COMPLETE.md:218:cp tokens.env.sample tokens.env
docs/archive/SHUBNIGGURATH_EXECUTION_COMPLETE.md:219:# Edit tokens.env with your credentials
docs/archive/VX11_v7_1_COMPLETION_REPORT.md:276:source tokens.env
docs/archive/vx11_1.txt:2714:    "token": "sk-or-...",
attic/docs/docsset/vx11.txt:48:    openai_api_key: str = ""
attic/docs/docsset/vx11.txt:49:    deepseek_api_key: str = ""
attic/docs/docsset/vx11.txt:52:        env_file = ".env"
attic/docs/docsset/vx11.txt:103:    if settings.env == "prod":
attic/docs/docsset/vx11.txt:405:    if settings.env == "prod":
attic/docs/docsset/vx11.txt:415:        "environment": settings.env
attic/docs/docsset/vx11.txt:2394:    "python.envFile": "${workspaceFolder}/.env",
attic/docs/docsset/vx11.txt:2410:    "python.envFile": "${workspaceFolder}/.env",
docs/archive/MISSION_STATUS_FINAL_v7.0.md:187:  • All env vars sourced from tokens.env
docs/archive/MISSION_STATUS_FINAL_v7.0.md:288:  baseURL: process.env.VITE_API_BASE || "http://localhost:8000",
docs/archive/MISSION_STATUS_FINAL_v7.0.md:290:    "X-VX11-Token": process.env.VITE_API_TOKEN
docs/archive/VX11_FINAL_REPORT_v6.0.md:285:#### tests/test_switch_auto.py & test_switch_deepseek_staging.py
docs/archive/VX11_FINAL_REPORT_v6.0.md:476:   - Validar tokens.env (secrets management)
docs/archive/VX11_v4_FINAL_STATUS.txt:226:   - See tokens.env for configuration
docs/archive/SUMMARY_v6.2.md:59:- 5 engines: local_gguf_small, deepseek_auto, gpt5_mini, hermes_cli, hermes_playwright
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:140:Seleccionar automáticamente el mejor proveedor IA (hermes_local, deepseek, openrouter, etc.) basado en:
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:175:selector.set_available_engines(["hermes_local", "deepseek", "cli_bash"])
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:198:| HIGH-PERF | 15s | 8 | deepseek, openrouter_text | deepseek |
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:210:  "available_engines": ["hermes_local", "deepseek", "cli_bash"]
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:269:  "available_engines": ["hermes_local", "deepseek"],
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:280:    "deepseek": {
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:300:selector.set_available_engines(["hermes_local", "deepseek", "cli_bash"])
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:333:Motor: deepseek
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:341:select_engine() ← Rechazará deepseek, usará fallback (openrouter)
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:345:Si deepseek responde: consecutive_errors=0, REABRE
docs/archive/PNP_AND_ADAPTIVE_ROUTING.md:346:Si deepseek falla: consecutive_errors=1, Se reintenta reset
attic/docs/docsset/vx11_zip.txt:507:    openai_api_key: Optional[str] = None
attic/docs/docsset/vx11_zip.txt:517:        env_file = ".env"
attic/docs/docsset/vx11_zip.txt:1944:if [ ! -f ".env" ]; then
attic/docs/docsset/vx11_zip.txt:1945:    cat > .env << EOF
attic/docs/docsset/vx11_zip.txt:1962:    echo "✓ Archivo .env creado. Edita con tus configuraciones."
attic/docs/docsset/vx11_zip.txt:2340:8. **Producción Lista**: Systemd, .env, configuración
attic/docs/docsset/vx11_funcional:16:5) Diseñar e implementar el uso de **DeepSeek R1** como proveedor IA principal (vía código) leyendo el token de `tokens.env` (`/home/elkakas314/vx11/tokens.env` en el host, adaptado a contenedor).
attic/docs/docsset/vx11_funcional:90:Switch (switch/main.py): Circuit breaker sólo para deepseek; resto de proveedores sin protección. _selector y scoring funcionan in-memory; el learner persiste en switch/learner.json pero no hay rotación/compacción. /switch/query y /route-v5 no consultan container_state ni auth. Métricas mínimas; no hay health de proveedores. Ruta MCP from_mcp es stub.
attic/docs/docsset/vx11_funcional:91:Hermes (hermes/main.py): Exec real de comandos del host tras check_permission; SAFE_COMMANDS y SAFE_PREFIXES incluyen docker run/kubectl get, permitiendo llamadas reales sin autenticación ni sandbox adicional. /route devuelve texto invertido (stub), no IA; integración con deepseek opcional pero no validada. Registry inicial registra motores aunque no existan; no hay cleanup de _JOBS persistente a disco; contexto-7 apenas se valida.
attic/docs/docsset/vx11_funcional:97:Config y datos: tokens.env.sample presente pero no tokens.env/tokens.env.master; sin claves deepseek/openrouter la mayoría de rutas IA fallan silenciosamente. config/settings.py paths apuntan a /app/* pero código local usa ./data, generando doble jerarquía en contenedor. config/container_state.py marca manifestator/shubniggurath/spawner en standby pero los módulos no respetan should_process.
attic/docs/docsset/vx11_funcional:308:            parsed_cmd = await self.parse_command(user_input, model="deepseek-r1-mini")
attic/docs/docsset/vx11_funcional:368:                "name": "deepseek-r1-mini",
attic/docs/docsset/vx11_funcional:2276:– El token está en `/home/elkakas314/vx11/tokens.env` en el host.
attic/docs/docsset/vx11_funcional:2278:  1) Diseñar un módulo cliente (ej. `vx11/ai_providers/deepseek_client.py`) que:
attic/docs/docsset/vx11_funcional:2279:     – Cargue las credenciales desde `.env`/`tokens.env`.
attic/docs/docsset/vx11_funcional:2288:– NUNCA expondrás el token directamente en el código. Todo vía `.env`.
attic/docs/docsset/vx11_funcional:2373:1. Crear cliente DeepSeek (`ai_providers/deepseek_client.py` o similar).
attic/docs/SHUB_NIGGURATH_v7_1_FINAL_AUDIT.md:293:  "task_id": "mock-task-001"
attic/docs/USO_RAPIDO_VX11_v6_6.md:4:- Secretos por variables de entorno (tokens); `tokens.env` es legacy solo para dev local.
attic/docs/API_OPERATOR_CHAT.md:262:const token = import.meta.env.VITE_VX11_TOKEN || 'vx11-local-token';
attic/docs/SECRETS_ROTATE.md:5:### 1. Backup tokens.env
attic/docs/SECRETS_ROTATE.md:7:cp tokens.env tokens.env.backup.$(date +%s)
attic/docs/SECRETS_ROTATE.md:10:### 2. Crear .env.local (no tracked)
attic/docs/SECRETS_ROTATE.md:12:cat tokens.env > .env.local
attic/docs/SECRETS_ROTATE.md:13:chmod 600 .env.local
attic/docs/SECRETS_ROTATE.md:16:### 3. Remover tokens.env del índice de Git
attic/docs/SECRETS_ROTATE.md:18:git rm --cached tokens.env
attic/docs/SECRETS_ROTATE.md:20:git commit -m "chore: remove tokens.env from tracking, use .env.local"
attic/docs/SECRETS_ROTATE.md:24:### 4. Verificar que .env.local no se commitea
attic/docs/SECRETS_ROTATE.md:26:git status  # tokens.env debe estar ignorado
attic/docs/SECRETS_ROTATE.md:33:### 1. Obtener valores de tokens.env
attic/docs/SECRETS_ROTATE.md:35:cat .env.local | grep -E "^[A-Z_]+=" | cut -d= -f1,2
attic/docs/SECRETS_ROTATE.md:47:- **DeepSeek**: Ir a https://platform.deepseek.com → regenerar API key
attic/docs/SECRETS_ROTATE.md:66:      - name: Create .env.local from secrets
attic/docs/SECRETS_ROTATE.md:68:          echo "VX11_GATEWAY_TOKEN=${{ secrets.VX11_GATEWAY_TOKEN }}" >> .env.local
attic/docs/SECRETS_ROTATE.md:69:          echo "DEEPSEEK_API_KEY=${{ secrets.DEEPSEEK_API_KEY }}" >> .env.local
attic/docs/SECRETS_ROTATE.md:77:# Confirmar que tokens están siendo cargados desde .env.local
attic/docs/SECRETS_ROTATE.md:84:# Verificar que tokens.env no está en ningún commit reciente
attic/docs/SECRETS_ROTATE.md:85:git log -p --all -- tokens.env | head -100
attic/docs/SECRETS_ROTATE.md:87:# Si tokens.env aparece, purgar historia:
attic/docs/SECRETS_ROTATE.md:88:git filter-branch --tree-filter 'rm -f tokens.env' -- --all
attic/docs/SECRETS_ROTATE.md:93:- [ ] Backup tokens.env creado
attic/docs/SECRETS_ROTATE.md:94:- [ ] .env.local creado y en .gitignore
attic/docs/SECRETS_ROTATE.md:95:- [ ] tokens.env removido del índice
attic/docs/AUDITORIA_SHUBNIGGURATH_v7.md:199:→ Retorna {"status": "queued", "task_id": "mock-task-001"}
docs/archive/repo_inventory.csv:35:.env.example,ACTIVE,Conservative default: keep active,8446
docs/archive/repo_inventory.csv:1324:.venv/lib/python3.10/site-packages/fastapi/security/__pycache__/api_key.cpython-310.pyc,ACTIVE,Conservative default: keep active,7567
docs/archive/repo_inventory.csv:1330:.venv/lib/python3.10/site-packages/fastapi/security/api_key.py,ACTIVE,Conservative default: keep active,9399
docs/archive/repo_inventory.csv:13713:build/artifacts/logs/pytest_hermes_deepseek.txt,POTENTIAL_ARCHIVE,Build/artifacts/backups/logs; likely archival candidate,2110
docs/archive/repo_inventory.csv:13714:build/artifacts/logs/pytest_hermes_deepseek_after_fix.txt,POTENTIAL_ARCHIVE,Build/artifacts/backups/logs; likely archival candidate,3797
docs/archive/repo_inventory.csv:13715:build/artifacts/logs/pytest_hermes_deepseek_after_fix2.txt,POTENTIAL_ARCHIVE,Build/artifacts/backups/logs; likely archival candidate,3797
docs/archive/repo_inventory.csv:13733:config/__pycache__/deepseek.cpython-310.pyc,ACTIVE,Source code or runtime/configuration directory,6393
docs/archive/repo_inventory.csv:13756:config/deepseek.py,ACTIVE,Source code or runtime/configuration directory,9624
docs/archive/repo_inventory.csv:14344:operator_backend/frontend/.env.example,ACTIVE,Source code or runtime/configuration directory,1240
docs/archive/repo_inventory.csv:18421:operator_backend/frontend/node_modules/autoprefixer/lib/hacks/mask-border.js,ACTIVE,Source code or runtime/configuration directory,790
docs/archive/repo_inventory.csv:18422:operator_backend/frontend/node_modules/autoprefixer/lib/hacks/mask-composite.js,ACTIVE,Source code or runtime/configuration directory,2109
docs/archive/repo_inventory.csv:26973:scripts/secure/secure_tokens.env.master,ACTIVE,Source code or runtime/configuration directory,296
docs/archive/repo_inventory.csv:27249:switch/__pycache__/deepseek_r1_provider.cpython-310.pyc,ACTIVE,Source code or runtime/configuration directory,3684
docs/archive/repo_inventory.csv:27264:switch/deepseek_r1_provider.py,ACTIVE,Source code or runtime/configuration directory,4287
docs/archive/repo_inventory.csv:27458:tests/__pycache__/test_switch_deepseek.cpython-310-pytest-7.4.3.pyc,ACTIVE,Source code or runtime/configuration directory,3079
docs/archive/repo_inventory.csv:27459:tests/__pycache__/test_switch_deepseek.cpython-310.pyc,ACTIVE,Source code or runtime/configuration directory,1545
docs/archive/repo_inventory.csv:27460:tests/__pycache__/test_switch_deepseek_staging.cpython-310-pytest-7.4.3.pyc,ACTIVE,Source code or runtime/configuration directory,1709
docs/archive/repo_inventory.csv:27461:tests/__pycache__/test_switch_deepseek_staging.cpython-310.pyc,ACTIVE,Source code or runtime/configuration directory,861
docs/archive/repo_inventory.csv:27556:tests/test_switch_deepseek.py,ACTIVE,Source code or runtime/configuration directory,906
docs/archive/repo_inventory.csv:27557:tests/test_switch_deepseek_staging.py,ACTIVE,Source code or runtime/configuration directory,747
docs/archive/repo_inventory.csv:27570:tokens.env,ACTIVE,Conservative default: keep active,494
docs/archive/repo_inventory.csv:27571:tokens.env.master,ACTIVE,Conservative default: keep active,572
docs/archive/repo_inventory.csv:27572:tokens.env.sample,ACTIVE,Conservative default: keep active,5041
docs/archive/FINAL_VERIFICATION.txt:179:  2. Validar tokens.env (secrets management)
attic/tests_legacy/test_madre_spawner_v7.py:615:                "switch_model_used": "deepseek",
attic/tests_legacy/test_madre_spawner_v7.py:673:                json=MagicMock(return_value={"strategy": "local_first", "model": "deepseek"})
docs/archive/FASES_4_7_COMPLETION_EXECUTIVE_SUMMARY.md:222:□ source tokens.env
docs/archive/FINAL_COMMANDS.md:39:source tokens.env
docs/archive/FINAL_COMMANDS.md:41:export $(cat tokens.env | xargs)
docs/archive/FINAL_COMMANDS.md:45:# Debe mostrar: sk-...
docs/archive/FINAL_COMMANDS.md:114:test -f .env.example && echo "✓ .env.example" || echo "✗ falta"
docs/archive/FINAL_COMMANDS.md:115:test -f tokens.env.sample && echo "✓ tokens.env.sample" || echo "✗ falta"
docs/archive/FINAL_COMMANDS.md:365:      "name": "deepseek",
docs/archive/FINAL_COMMANDS.md:366:      "model": "deepseek-r1",
docs/archive/VX11_AUDIT_v6_3.md:29:  settings.py  db_schema.py  database.py  tokens.py  orchestration_bridge.py  metrics.py  utils.py  deepseek.py ...
docs/archive/VX11_AUDIT_v6_3.md:31:  *.sh  systemd/*.service  secure/secure_tokens.env.master
docs/archive/VX11_AUDIT_v6_3.md:179:- Tests presentes en `tests/`: cubren tentáculo_link, madre, switch (deepseek/local/providers), hermes (waveform/cli detection), hormiguero (queen), manifestator drift, mcp, spawner endpoints, operator intents, shub (pro/api/mode_c/io/simple), integración pnp, modos, db_schema, dynamic optimization.  
docs/archive/REPORTE_FASE3_AUTONOMIA.md:308:- ✓ tokens.env (lectura only)
attic/tests_legacy/test_switch_deepseek.py:5:def test_select_provider_long_prompt_prefers_deepseek_or_local():
attic/tests_legacy/test_switch_deepseek.py:16:def test_auto_fallback_to_local_when_no_deepseek_key(monkeypatch):
attic/tests_legacy/test_switch_deepseek.py:23:    # Should choose local engine when no deepseek key
docs/canon/VX11_MANIFESTATOR_MIN_CONTRACT_v7.json:160:            "default": "loaded from tokens.env (if available)",
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.2.0.json:70:                "OPERATOR_ADMIN_PASSWORD, OPERATOR_TOKEN_SECRET, VX11_TENTACULO_LINK_TOKEN: via tokens.env (gitignored)",
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.2.0.json:72:                "tokens.env and tokens.env.master: gitignored; never checked in",
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.2.0.json:73:                "CI/CD secrets: injected at runtime (e.g., CI=1 loads from env, not .env file)"
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.2.0.json:211:                        "token_type": "bearer",
attic/tests_legacy/test_switch_multiauto.py:7:    # ensure deepseek returns failure so selector falls back to local
attic/tests_legacy/test_switch_multiauto.py:8:    async def fake_deepseek(prompt, opts=None):
attic/tests_legacy/test_switch_multiauto.py:11:    monkeypatch.setattr("config.deepseek.call_deepseek", lambda *a, **k: {"ok": False, "error": "no_key"})
attic/tests_legacy/test_switch_multiauto.py:13:    # call switch route with preference for deepseek but expect local fallback
attic/tests_legacy/test_switch_multiauto.py:15:    resp = client.post("/switch/route", json={"prompt": "hello", "providers": ["deepseek", "local"]})
attic/tests_legacy/test_switch_multiauto.py:24:    # Force hermes to be unavailable and deepseek to be ok
attic/tests_legacy/test_switch_multiauto.py:25:    monkeypatch.setattr("config.deepseek.call_deepseek", lambda *a, **k: {"ok": True, "result": {"reply": "deep"}})
attic/tests_legacy/test_switch_multiauto.py:27:    resp = client.post("/switch/route", json={"prompt": "run this", "providers": ["hermes", "deepseek", "local"]})
attic/tests_legacy/test_switch_multiauto.py:31:    assert data.get("engine") in ("deepseek", "local", "hermes")
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.0.1.json:58:                "tokens.env contains OPERATOR_ADMIN_PASSWORD, OPERATOR_TOKEN_SECRET, VX11_TENTACULO_LINK_TOKEN",
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.0.1.json:60:                "tokens.env and tokens.env.master are gitignored"
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.0.1.json:171:                        "token_type": "bearer",
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.0.1.json:395:            "token": "Static bearer token (config.tokens)",
docs/canon/VX11_OPERATOR_SUPERPACK_CANONICAL_v7.0.0.json:58:            "secrets": "env/tokens.env only, never committed"
docs/canon/VX11_SHUB_CANONICAL_v1.7.1-canon.full.json:18:            "deepseek_web_shub_json_v1.0.0",
docs/canon/VX11_SHUB_CANONICAL_v1.7.1-canon.full.json:23:            "deepseek_dkjson_advice"
docs/canon/CANONICAL_FLOWS_VX11.json:70:        "Verify deepseek_r1 registered in switch/hermes/models_catalog.json",
docs/canon/CANONICAL_FLOWS_VX11.json:71:        "Check api_key_env=DEEPSEEK_API_KEY (no hardcoded secrets)",
docs/canon/CANONICAL_FLOWS_VX11.json:73:        "Test invocation: /madre/power/audit/deepseek_r1 (or equivalent)"
docs/canon/CANONICAL_FLOWS_VX11.json:75:      "expected_evidence": "docs/audit/vx11_canon_master_<TS>/deepseek_r1_integration.md"
docs/PROMPT_9R_TEMPLATE.md:61:# o verificar en tokens.env
docs/PROMPT_9R_TEMPLATE.md:62:cat tokens.env | grep DEEPSEEK
docs/PROMPT_9R_TEMPLATE.md:75:key = os.environ.get("DEEPSEEK_API_KEY") or os.environ.get("DEEPSEEK_TOKEN")
docs/PROMPT_9R_TEMPLATE.md:80:client = OpenAI(api_key=key, base_url="https://api.deepseek.com")
docs/PROMPT_9R_TEMPLATE.md:82:    model="deepseek-reasoner",   # o "deepseek-chat" para más rápido
docs/PROMPT_9R_TEMPLATE.md:379:**DeepSeek Docs**: https://api-docs.deepseek.com  
attic/tests_legacy/test_switch_hermes_shub_pipeline.py:49:    res = client.post("/madre/shub/task", json=payload, headers={"X-VX11-Token": os.environ.get("VX11_LOCAL_TOKEN", "vx11-local-token")})
attic/tests_legacy/test_gateway_v7.py:183:                guard(x_vx11_token="invalid-token")
attic/tests_legacy/test_operator_backend_v7.py:237:        mock_task.id = "task-123"
attic/tests_legacy/test_operator_backend_v7.py:269:        task_id = "task-123"
attic/tests_legacy/test_shubniggurath_phase5.py:23:    result = await sync.sync_asset_to_shub("task-1", asset_data)
attic/tests_legacy/test_shubniggurath_phase5.py:52:    await sync.sync_asset_to_shub("task-1", {
attic/tests_legacy/test_switch_hermes_v7.py:35:            "name": "deepseek_r1",
attic/tests_legacy/test_switch_hermes_v7.py:36:            "base_url": "https://api.deepseek.com/v1",
attic/tests_legacy/test_switch_hermes_v7.py:37:            "api_key_env": "DEEPSEEK_API_KEY",
attic/tests_legacy/test_switch_hermes_v7.py:43:        assert payload["name"] == "deepseek_r1"
attic/tests_legacy/test_switch_hermes_v7.py:44:        assert "DEEPSEEK_API_KEY" in payload["api_key_env"]
attic/tests_legacy/test_switch_hermes_v7.py:124:        fields = ["name", "base_url", "api_key_env", "task_types", 
attic/tests_legacy/test_switch_hermes_v7.py:152:    def test_deepseek_settings_exist(self):
attic/tests_legacy/test_switch_hermes_v7.py:156:        assert hasattr(settings, "deepseek_api_key")
attic/tests_legacy/test_switch_hermes_v7.py:157:        assert hasattr(settings, "deepseek_base_url")
attic/tests_legacy/test_switch_hermes_v7.py:158:        assert hasattr(settings, "deepseek_daily_limit_tokens")
attic/tests_legacy/test_switch_hermes_v7.py:159:        assert hasattr(settings, "deepseek_monthly_limit_tokens")
attic/tests_legacy/test_switch_hermes_v7.py:162:        assert settings.deepseek_daily_limit_tokens > 0
attic/tests_legacy/test_switch_hermes_v7.py:163:        assert settings.deepseek_monthly_limit_tokens > settings.deepseek_daily_limit_tokens
attic/tests_legacy/test_shubniggurath_complete_suite.py:220:        result = await sync.sync_asset_to_shub("task-1", {
attic/tests_legacy/test_pnp_and_integration.py:206:        selector.set_available_engines(["hermes_local", "deepseek", "openrouter_text"])
attic/tests_legacy/test_pnp_and_integration.py:213:        # In CRITICAL mode, prefer deepseek
attic/tests_legacy/test_madre.py:61:            confirm_token="test-token-123",
attic/tests_legacy/test_switch_integration_v7.py:31:                "engine": "deepseek_r1",
attic/tests_legacy/test_switch_integration_v7.py:45:            assert result["engine"] == "deepseek_r1"
attic/tests_legacy/test_switch_integration_v7.py:108:                engine="deepseek_r1",
attic/tests_legacy/test_hermes_discovery_apply.py:6:def test_deepseek_registration():
attic/tests_legacy/test_hermes_discovery_apply.py:7:    """Ensure that DeepSeek R1 gets registered when settings.deepseek_base_url is set."""
attic/tests_legacy/test_hermes_discovery_apply.py:8:    orig = getattr(settings, "deepseek_base_url", None)
attic/tests_legacy/test_hermes_discovery_apply.py:9:    settings.deepseek_base_url = "https://api.deepseek.example/v1"
attic/tests_legacy/test_hermes_discovery_apply.py:12:        existing = db.query(CLIProvider).filter_by(name="deepseek_r1").first()
attic/tests_legacy/test_hermes_discovery_apply.py:21:        prov = db.query(CLIProvider).filter_by(name="deepseek_r1").first()
attic/tests_legacy/test_hermes_discovery_apply.py:23:        assert prov.base_url is not None and "deepseek" in prov.base_url
attic/tests_legacy/test_hermes_discovery_apply.py:27:                delattr(settings, "deepseek_base_url")
attic/tests_legacy/test_hermes_discovery_apply.py:31:            settings.deepseek_base_url = orig
attic/tests_legacy/test_db_schema.py:45:        unique_uuid = f"test-task-{uuid_lib.uuid4().hex[:8]}"
attic/import_map.json:198:        "config.deepseek",
attic/import_map.json:306:      "switch/deepseek_r1_provider.py": [
attic/import_map.json:463:        "config.deepseek",
attic/tools/operator/OPERATOR_MODE_AUDIT.py:211:    NOTA: tokens.env NO es JSON, es un archivo .env (ignorado)
attic/tools/operator/OPERATOR_MODE_AUDIT.py:221:    # Add any JSON files in root (excluding tokens.env which is .env format)
attic/spawner/main.py:41:MAX_ACTIVE = int(os.environ.get("SPAWNER_MAX_ACTIVE", "5"))
attic/spawner/main.py:139:        "env": req.env or {},
attic/spawner/ephemeral_v2.py:72:        self.env = env or {}
attic/spawner/ephemeral_v2.py:91:            env = os.environ.copy()
attic/spawner/ephemeral_v2.py:92:            env.update(self.env)
attic/spawner/ephemeral_v2.py:205:            env=req.env or {},
attic/MADRE_v7_COMPLETE.md:213:- Secrets: Never in code (via `.env`, tokens.py)
attic/PHASE4_EXECUTIVE_SUMMARY.txt:59:     - test_deepseek_registration              (1 test) ✅
OPERATOR_E2E_DELIVERY.md:138:# .env or docker-compose.yml
audit_constructor_reasoning.py:10:# Cargar tokens.env explícitamente
audit_constructor_reasoning.py:11:load_dotenv(repo_root / "tokens.env")
audit_constructor_reasoning.py:14:from config.deepseek import call_deepseek_reasoner
audit_constructor_reasoning.py:20:    api_key = os.getenv("DEEPSEEK_API_KEY")
audit_constructor_reasoning.py:21:    if api_key:
audit_constructor_reasoning.py:22:        settings.deepseek_api_key = api_key
audit_constructor_reasoning.py:56:    result, latency, confidence = call_deepseek_reasoner(prompt, task_type="deep_audit")
audit_constructor_reasoning.py:58:    if result.get("provider") == "deepseek-r1":
docs/audit/20251228_SWITCH_HERMES_FIX/INVESTIGATION_LOG.md:24:  ✗ deepseek_r1 error: All connection attempts failed
docs/audit/DB_MAP_v7_FINAL.md:115:  - api_key_env (VARCHAR(100)) NOT NULL
scripts/autofix_conductor_v1.py:40:DEEPSEEK_API_URL = "https://api.deepseek.com/v1/chat/completions"
scripts/autofix_conductor_v1.py:41:DEEPSEEK_MODEL = "deepseek-reasoner"
scripts/autofix_conductor_v1.py:42:DEEPSEEK_TOKEN = os.environ.get("DEEPSEEK_API_TOKEN", "")
scripts/autofix_conductor_v1.py:83:def invoke_deepseek_r1(failure_context: str) -> Dict[str, Any]:
scripts/autofix_conductor_v1.py:252:    analysis = invoke_deepseek_r1(failure_context)
scripts/e2e_test_conductor_v1.py:48:    or os.environ.get("VX11_TOKEN")
docs/audit/DB_SCHEMA_v7_FINAL.json:546:          "name": "api_key_env",
docs/audit/FASE7_CONCLUSIÓN_FINAL.md:99:  - `VX11_ALLOW_SERVICE_CONTROL = os.environ.get("VX11_ALLOW_SERVICE_CONTROL", "0")`
docs/audit/FASE7_CONCLUSIÓN_FINAL.md:100:  - `MAINTENANCE_WINDOW_ENABLED = os.environ.get("MAINTENANCE_WINDOW_ENABLED", "0")`
docs/DEPLOYMENT_COMPLETE_REPORT.md:72:├── .env.phase5                                   (Feature flags)
docs/DEPLOYMENT_COMPLETE_REPORT.md:217:# Load .env.phase5 to see all flags
docs/DEPLOYMENT_COMPLETE_REPORT.md:218:cat .env.phase5
docs/DEPLOYMENT_COMPLETE_REPORT.md:341:   export DEEPSEEK_API_TOKEN="sk-..."
docs/DEPLOYMENT_COMPLETE_REPORT.md:383:- [.env.phase5](.env.phase5) - Feature flags configuration
scripts/functional_flow_test.py:38:    """Carga tokens desde tokens.env si existe."""
scripts/functional_flow_test.py:40:    env_file = Path("tokens.env")
scripts/functional_flow_test.py:56:    Prioridad: Env Var > tokens.env > Default (vx11-local-token)
scripts/functional_flow_test.py:60:        os.environ.get("VX11_TOKEN")
scripts/e2e_test_conductor_v0.py:46:    or os.environ.get("VX11_TOKEN")
docs/canonical/modules/manifestator/manifestator_canonical.json:54:    "provider": "deepseek",
docs/canonical/modules/manifestator/VX11_MANIFESTATOR_CANONICAL_v7.0.0.json:54:    "provider": "deepseek",
scripts/vx11_agent_bootstrap.py:90:    tokens_path = REPO_ROOT / "tokens.env"
scripts/vx11_agent_bootstrap.py:96:        log_message(f"✗ tokens.env no encontrado", level="ERROR")
scripts/call_deepseek_r1_harness_review_v2.py:18:env_file = Path("/home/elkakas314/vx11/tokens.env")
scripts/call_deepseek_r1_harness_review_v2.py:31:                    os.environ[key] = val
scripts/call_deepseek_r1_harness_review_v2.py:36:    from config.deepseek import call_deepseek_reasoner
scripts/call_deepseek_r1_harness_review_v2.py:41:    print(f"[ERROR] Make sure DEEPSEEK_API_KEY is set in tokens.env")
scripts/call_deepseek_r1_harness_review_v2.py:109:        result, latency_ms, confidence = call_deepseek_reasoner(
scripts/call_deepseek_r1_harness_review_v2.py:121:        print(f"[ERROR] Check DEEPSEEK_API_KEY in tokens.env")
scripts/call_deepseek_r1_harness_review_v2.py:135:**Model:** deepseek-reasoner
scripts/call_deepseek_r1_harness_review.py:17:env_file = Path("/home/elkakas314/vx11/tokens.env")
scripts/call_deepseek_r1_harness_review.py:26:from config.deepseek import call_deepseek_reasoner
scripts/call_deepseek_r1_harness_review.py:106:    print(f"[DEEPSEEK] Model: deepseek-reasoner")
scripts/call_deepseek_r1_harness_review.py:110:    result, latency_ms, confidence = call_deepseek_reasoner(
scripts/contracts_generate_17of17.py:198:    pattern = "(token|api_key|secret|password)"
scripts/contracts_generate_17of17.py:207:        "!tokens.env",
scripts/contracts_generate_17of17.py:209:        "!tokens.env.master",
scripts/r1_optimize_power_manager.py:23:from config.deepseek import call_deepseek_reasoner_async
scripts/r1_optimize_power_manager.py:121:    result, latency_ms, confidence = await call_deepseek_reasoner_async(
scripts/e2e_test_conductor_v2.py:49:    or os.environ.get("VX11_TOKEN")
docs/vx11_union.txt:11:├── 📁 switch/                 # 52113 - Router IA (local/deepseek/auto) + Hermes
docs/vx11_union.txt:22:├── 📄 tokens.env              # Plantilla seguridad
docs/vx11_union.txt:102:    openai_api_key: Optional[str] = None
docs/vx11_union.txt:103:    deepseek_api_key: Optional[str] = None
docs/vx11_union.txt:105:    default_model: str = "auto"  # auto, local, deepseek
docs/vx11_union.txt:117:        env_file = ".env"
docs/vx11_union.txt:222:    provider = Column(String(50))  # local, deepseek, openai, etc.
docs/vx11_union.txt:224:    api_key = Column(String(200), nullable=True)
docs/vx11_union.txt:326:    if client_host not in ["127.0.0.1", "localhost"] and settings.environment == "prod":
docs/vx11_union.txt:459:        environment=settings.environment
docs/vx11_union.txt:522:    if settings.environment == "dev":
docs/vx11_union.txt:876:                (r'(local|remoto|deepseek).*modelo', 'route'),
docs/vx11_union.txt:1004:            elif "deepseek" in text:
docs/vx11_union.txt:1005:                specific_params["provider"] = "deepseek"
docs/vx11_union.txt:1038:- [ ] **Switch** - Router IA (local/deepseek/auto) + Hermes
docs/vx11_union.txt:1070:├── 📄 tokens.env              # Seguridad
docs/vx11_union.txt:1956:- [ ] **Switch** - Router IA (local/deepseek/auto) + Hermes
docs/vx11_union.txt:1988:├── 📄 tokens.env              # Seguridad
docs/vx11_union.txt:2874:- [ ] **Switch** - Router IA (local/deepseek/auto) + Hermes
docs/vx11_union.txt:2929:from switch.core.deepseek_client import DeepSeekClient
docs/vx11_union.txt:2944:deepseek_client = DeepSeekClient()
docs/vx11_union.txt:2949:    mode: str = "auto"  # auto, local, deepseek, hermes
docs/vx11_union.txt:2993:        if provider == "deepseek":
docs/vx11_union.txt:2994:            result = await deepseek_client.query(
docs/vx11_union.txt:3147:    providers = ["deepseek", "local", "hermes"]
docs/vx11_union.txt:3151:            if provider == "deepseek":
docs/vx11_union.txt:3152:                result = await deepseek_client.query(
docs/vx11_union.txt:3204:            "deepseek_client": "active"
docs/vx11_union.txt:3208:            "deepseek": await deepseek_client.check_health(),
docs/vx11_union.txt:3242:            "deepseek": 0.6,   # Balanceado
docs/vx11_union.txt:3277:            # Alta complejidad -> deepseek para mejor calidad
docs/vx11_union.txt:3278:            return "deepseek"
docs/vx11_union.txt:3286:            # Por defecto usar deepseek
docs/vx11_union.txt:3287:            return "deepseek"
docs/vx11_union.txt:3348:# 📄 vx11_final/switch/core/deepseek_client.py
docs/vx11_union.txt:3357:logger = logging.getLogger("deepseek_client")
docs/vx11_union.txt:3363:        self.base_url = "https://api.deepseek.com/v1"
docs/vx11_union.txt:3364:        self.api_key = settings.deepseek_api_key
docs/vx11_union.txt:3365:        self.model = "deepseek-chat"
docs/vx11_union.txt:3370:        if not self.api_key:
docs/vx11_union.txt:3384:                    "Authorization": f"Bearer {self.api_key}",
docs/vx11_union.txt:3417:        if not self.api_key:
docs/vx11_union.txt:3418:            return "no_api_key"
docs/vx11_union.txt:3429:                headers = {"Authorization": f"Bearer {self.api_key}"}
docs/vx11_union.txt:4439:- `tokens.env` - Plantilla seguridad
docs/vx11_union.txt:4440:- `.env.example` - Variables entorno
docs/vx11_union.txt:4616:echo "   1. Edita tokens.env con tus claves API"
docs/vx11_union.txt:4809:tar -czf "$BACKUP_DIR/config_$TIMESTAMP.tar.gz" config/ tokens.env .env 2>/dev/null || true
docs/vx11_union.txt:5093:    "rest-client.environmentVariables": {
docs/vx11_union.txt:5249:# 📄 vx11_final/tokens.env
docs/vx11_union.txt:5252:DEEPSEEK_API_KEY=your_deepseek_key_here
docs/vx11_union.txt:5268:# 📄 vx11_final/.env.example
docs/vx11_union.txt:5269:# Plantilla de variables de entorno - Copiar a .env y ajustar
docs/vx11_union.txt:5271:DEEPSEEK_API_KEY=your_actual_deepseek_key_here
docs/vx11_union.txt:5641:  "model_used": "deepseek-chat",
docs/vx11_union.txt:5642:  "provider": "deepseek",
docs/vx11_union.txt:5773:# Editar tokens.env con tus claves reales
docs/vx11_union.txt:5774:nano tokens.env
docs/vx11_union.txt:5776:cp tokens.env .env
docs/vx11_union.txt:5777:nano .env
docs/vx11_union.txt:5789:Crear archivo `.env`:
docs/vx11_union.txt:5797:DEEPSEEK_API_KEY=tu_deepseek_key
docs/vx11_union.txt:6331:- 🔀 **Switch** (52113) - Router IA (local/deepseek/auto) + Hermes integration
docs/vx11_union.txt:6353:- ✅ **Configuración**: tokens.env, .env.example, settings completos
docs/vx11_union.txt:6380:├── 📄 tokens.env              # ✅ Seguridad
docs/vx11_union.txt:6381:├── 📄 .env.example            # ✅ Plantilla
docs/vx11_union.txt:6397:3. **Configurar** tus tokens en `tokens.env`
scripts/run_shub_dev.sh:28:if [ ! -f "tokens.env" ]; then
scripts/run_shub_dev.sh:29:    echo "⚠️  tokens.env not found. Creating from sample..."
scripts/run_shub_dev.sh:30:    cp tokens.env.sample tokens.env
scripts/run_shub_dev.sh:31:    echo "   ⚠️  Please update tokens.env with your credentials"
scripts/run_shub_dev.sh:34:source tokens.env
docs/hormiguero_manifetsaator.txt:536:    if nonce_already_used(request.envelope.nonce):
docs/hormiguero_manifetsaator.txt:540:    if abs(now() - request.envelope.timestamp) > 300:
docs/hormiguero_manifetsaator.txt:641:        "ack_sequence": payload.envelope.sequence,
docs/hormiguero_manifetsaator.txt:2384:                ws_url = f"{self.ws_endpoint}?colony_id={self.colony_id}&token={self.auth_token}"
scripts/generate_db_map_from_db.py:9:DB = os.environ.get("VX11_DB_PATH") or (
scripts/generate_db_map_from_db.py:187:    raw = os.environ.get(name)
scripts/generate_db_map_from_db.py:215:timeout_secs = int(os.environ.get("VX11_DBMAP_INTEGRITY_TIMEOUT_SECS", "60"))
scripts/verify_inee_integration.sh:148:echo "   3. Enable (optional): Set VX11_INEE_ENABLED=1 in .env"
docs/vx11.txt:48:    openai_api_key: str = ""
docs/vx11.txt:49:    deepseek_api_key: str = ""
docs/vx11.txt:52:        env_file = ".env"
docs/vx11.txt:103:    if settings.env == "prod":
docs/vx11.txt:405:    if settings.env == "prod":
docs/vx11.txt:415:        "environment": settings.env
docs/vx11.txt:2394:    "python.envFile": "${workspaceFolder}/.env",
docs/vx11.txt:2410:    "python.envFile": "${workspaceFolder}/.env",
scripts/deepseek_operator_d_g_guidance.py:18:env_file = Path("/home/elkakas314/vx11/tokens.env")
scripts/deepseek_operator_d_g_guidance.py:29:                    os.environ[key] = val
scripts/deepseek_operator_d_g_guidance.py:34:    from config.deepseek import call_deepseek_reasoner
scripts/deepseek_operator_d_g_guidance.py:215:result = call_deepseek_reasoner(prompt)
scripts/deepseek_operator_d_g_guidance.py:236:    output_file = latest_audit[-1] / "deepseek_r1_d_g_guidance.txt"
scripts/vx11_task_router.py:253:Versión: 2.0Generated: 2025-12-15T15:45:00Z  **Próxima sesión:** Copiar este prompt y pegarlo en un chat nuevo con agente genérico GPT-5-mini.---- [ ] ✅ Estar listo para recibir comandos operativos- [ ] ✅ Reconocer estructura VX11 completa- [ ] ✅ Tener configurado VS Code para auto-aprobación- [ ] ✅ Presentar estado del sistema en español coloquial- [ ] ✅ Ejecutar diagnóstico inicial silenciosoTras activar este prompt, el agente debe:## ✅ CHECKLIST FINAL---4. 📋 **Reportar** en `docs/audit/EMERGENCIA_$(date).md`3. 💾 **Usar backups** en `data/backups/`2. 📊 **Consultar BD** para último estado conocido1. ❌ **No entrar en bucle** de diagnósticosSi algo falla:## 🚨 PROTOCOLO DE EMERGENCIA---```└── tokens.env (read-only)├── operador_ui/ (8011/8020)├── switch/ (8002)├── madre/ (8001)├── tentaculo_link/ (puerto 8000)│   └── vx11_runtime_truth.py ← Diagnóstico│   ├── vx11_task_router.py ← Router de tareas│   ├── vx11_agent_bootstrap.py ← Auto-ejecutar├── scripts/│   └── vx11.db (85 tablas)├── data/runtime/│   └── tokens.py│   ├── db_schema.py│   ├── settings.py├── config/│   └── settings.json (auto-aprobación configurada)├── .vscode/│   └── copilot-instructions.md│   ├── workflows/│   ├── agents/vx11.agent.md├── .github//home/elkakas314/vx11/```El agente debe reconocer y usar:## 📁 ESTRUCTURA ESPERADA---```  -d '{"action": "diagnóstico", "system": "vx11"}'  -H "Content-Type: application/json" \curl -s -X POST http://localhost:8000/vx11/context7/enrich \```bashPara cada operación importante, consulta Context7 automáticamente:## 🧠 CONTEXT7 INTEGRADO---✅ **SÍ:** "Diagnosticando..."❌ **NO:** "Procederé a ejecutar un diagnóstico del sistema"  ✅ **SÍ:** "Módulos activos: Tentáculo Link (8000), Madre (8001), Switch (8002)"❌ **NO:** "A continuación se presenta una tabla con los módulos activos"  ✅ **SÍ:** "Tentáculo Link funcionando en puerto 8000"❌ **NO:** "El módulo Tentáculo Link está en estado operativo en el puerto 8000"  ### Ejemplos:- ✅ **Sin explicaciones largas** a menos que sean necesarias- ✅ **Respuestas directas y operativas**- ✅ **Evitar tablas automáticas** (solo si se piden)- ✅ **Español coloquial siempre**### Reglas:## 💬 ESTILO DE COMUNICACIÓN---```  -d '{"instruction":"optimizar rutas"}'  -H "X-VX11-Token: vx11-local-token" \curl -X POST http://localhost:8002/prompt \# Ejemplo: @vx11 inyecta "optimizar rutas" en switch```bashInyecta instrucción en módulo activo:### 5. `@vx11 inyecta [prompt] en [módulo]````PYEOF        print(f"Removido: {log.name}")        log.unlink()    if datetime.fromtimestamp(log.stat().st_mtime) < datetime.now() - timedelta(days=7):for log in logs_dir.glob("*.log"):logs_dir = Path("/home/elkakas314/vx11/logs")# Limpiar logs >7 díasfrom datetime import datetime, timedeltafrom pathlib import Pathimport ospython3 << 'PYEOF'```bashMantenimiento inteligente:### 4. `@vx11 limpia````# Si falla → reiniciar container o diagnosticarcurl -s http://localhost:8002/health | jq .# Ejemplo: @vx11 repara switch```bashDiagnóstico y reparación automática:### 3. `@vx11 repara [servicio]`**Detecta automáticamente:** chat, audio, code, system, task, scan, audit```python3 scripts/vx11_task_router.py "descripción de la tarea"```bashEjecuta tarea automáticamente en el módulo adecuado:### 2. `@vx11 ejecuta [descripción]`- Recursos (CPU/RAM)- Workflows configurados- Estado de BD- Módulos activos (puertos 8000-8020)**Retorna:**```curl -s http://localhost:8000/health | jq .python3 scripts/vx11_runtime_truth.py 2>&1```bashDiagnóstico completo del sistema:### 1. `@vx11 status`## 📊 COMANDOS OPERATIVOS---- Exposición de tokens/secrets- `git reset --hard`- `docker compose down`- `rm -rf` sin backup claro- `sudo` cualquier comando**Requiere confirmación:**- Git status/diff/log- Scripts de VX11- Consultas HTTP locales- Lectura de archivos- Comandos de diagnóstico**Auto-aprobado:**- ✅ **Python formatter** (black) listo- ✅ **REST Client** configurado con URLs de todos los módulos- ✅ **Denylist** de comandos destructivos (sudo, rm -rf, git reset --hard)- ✅ **Auto-aprobación** de comandos seguros (lectura, git status, python, curl)La configuración está en `.vscode/settings.json` con:## ⚙️ CONFIGURACIÓN VS CODE---```¿Qué necesitas operar hoy?• @vx11 inyecta ... → Inyectar instrucción en módulo• @vx11 limpia      → Mantenimiento automático• @vx11 repara ...  → Diagnóstico y reparación• @vx11 ejecuta ... → Ejecutar tarea automáticamente• @vx11 status      → Estado completo del sistemaComandos disponibles:Rama git: copilot-vx11-agent-hardeningBD: 85 tablas presentesMódulos: 9/10 compiladosEstado: OPERATIVO ✅Sistema detectado en: /home/elkakas314/vx11🔧 AGENTE VX11 ACTIVADO```Genera un mensaje como este:### Paso 2: Presentar Estado```PYEOFdb.close()print(f"Tablas en BD: {len(inspector.get_table_names())}")inspector = inspect(db.get_bind())db = get_session()from sqlalchemy import inspectfrom config.db_schema import get_sessionpython3 << 'PYEOF'# 4. Consultar BDgit log --oneline -1# 3. Git statuspython3 scripts/vx11_agent_bootstrap.py 2>&1 | tail -15# 2. Verificar estructura claveecho "__VX11_AGENTE_ACTIVO__"pwd && whoamicd /home/elkakas314/vx11# 1. Estado básico del sistema```bashEjecuta estos comandos SILENCIOSAMENTE:### Paso 1: Diagnóstico Inmediato## 🎯 PROTOCOLO DE AUTO-CONFIGURACIÓN---4. ✅ Espera comandos operativos3. ✅ Presenta estado del sistema en **español coloquial**2. ✅ Configura el entorno para operatividad máxima1. ✅ Lee el estado actual del sistema VX11Cuando actives este prompt en un **chat nuevo con agente genérico y modelo GPT-5-mini**, **automáticamente**:## 📋 INSTRUCCIONES DE INICIO---**Status:** ✅ LISTO PARA DEPLOY**Versión:** 2.0 (15 Diciembre 2025)  vx11_task_router.py - Auto-router de tareas para agente VX11
scripts/auditor_orden_vx11.py:127:        Path(os.environ.get("VX11_AUDIT_OUTDIR", ""))
scripts/auditor_orden_vx11.py:128:        if os.environ.get("VX11_AUDIT_OUTDIR")
docs/Archivo de texto.txt:272:  * `POST /operator/bridge/deepseek_web`
docs/Archivo de texto.txt:670:            "path": "/operator/bridge/deepseek_web",
docs/Archivo de texto.txt:672:            "sampleResponse": "{ ok, provider:'deepseek_web', text, html_snippet, duration_ms, error }",
docs/Archivo de texto.txt:865:            "file": "tokens.env",
docs/Archivo de texto.txt:872:        "Replace file-based tokens with vault/secret manager; require environment variables and remove `tokens.env` from repo history (rotate leaked keys).",
docs/Archivo de texto.txt:1000:- **POST** `/operator/bridge/deepseek_web`
docs/Archivo de texto.txt:1002:  Respuesta: `{ ok, provider:'deepseek_web', text, html_snippet, duration_ms, error }`
docs/Archivo de texto.txt:1096:- Archivo sensible: `tokens.env` (local en repo raíz). Contiene claves: `DEEPSEEK_API_KEY`, `HUGGINGFACEHUB_API_TOKEN`, `OPENROUTER_API_KEY`, `GITHUB_PAT` (según JSON). Riesgo: alto — rotar y mover a vault.
docs/Archivo de texto.txt:1112:- `tokens.env` existe pero no fue mostrado su contenido aquí (evitar exponer claves).
docs/Archivo de texto.txt:1144:- Secrets detectados en repo raíz: tokens.env (valor expuesto) — riesgo crítico.
docs/Archivo de texto.txt:1162:- Secrets comprometidos: tokens.env en repo raíz — riesgo alto.
docs/Archivo de texto.txt:1220:- tokens.env está en repo raíz (expuesto). Acción requerida: remover del VCS, rotar claves y usar secret manager/CI secrets. (CRÍTICO)
docs/Archivo de texto.txt:1231:  1. Secret leakage (tokens.env) — alta prioridad.
docs/Archivo de texto.txt:1257:1. Remediar secrets: eliminar tokens.env del repo, rotar claves, implantar secret manager (Vault/Env in CI). (CRÍTICO)
docs/Archivo de texto.txt:1280:  - Eliminar tokens.env del control de versiones (git rm --cached), rotar claves y actualizar CI/CD variables. NO lo haré por restricción tuya — te doy pasos.
docs/Archivo de texto.txt:1300:- B) Te proporciono comandos y guías paso a paso para remover tokens.env y rotar claves (no ejecutaré).
docs/Archivo de texto.txt:1307:ahora te doy el operator de deepseek r1 web
docs/Archivo de texto.txt:1319:├── .env.example
docs/Archivo de texto.txt:1558:### 4. `.env.example`
docs/Archivo de texto.txt:1654:const BASE_URL = import.meta.env.VITE_OPERATOR_BASE_URL || 'http://localhost:8011'
docs/Archivo de texto.txt:1670:      const token = import.meta.env.VITE_AUTH_TOKEN
docs/Archivo de texto.txt:1671:      if (token && import.meta.env.VITE_ENABLE_AUTH === 'true') {
docs/Archivo de texto.txt:1743:    return this.request('/operator/bridge/deepseek_web', { prompt })
docs/Archivo de texto.txt:1923:  import.meta.env.VITE_WS_URL || 'ws://localhost:8011/ws'
docs/Archivo de texto.txt:2731:   cp .env.example .env
docs/Archivo de texto.txt:2733:4. Update `.env` if needed (defaults work with local backend)
docs/Archivo de texto.txt:2820:- `POST /operator/bridge/deepseek_web` - DeepSeek web bridge
docs/Archivo de texto.txt:2984:  forbidOnly: !!process.env.CI,
docs/Archivo de texto.txt:2985:  retries: process.env.CI ? 2 : 0,
docs/Archivo de texto.txt:2986:  workers: process.env.CI ? 1 : undefined,
docs/Archivo de texto.txt:3009:    reuseExistingServer: !process.env.CI,
docs/Archivo de texto.txt:3127:10. **POST /operator/bridge/deepseek_web** - Bridge a DeepSeek
docs/Archivo de texto.txt:3181:Se ha buscado la expresión regular `\/operator\/|fetch\(|axios\.|new\s+WebSocket|ws:\/\/|wss:\/\/|playwright|monaco|zustand|react-query|react[- ]flow|react-grid-layout|log viewer|tokens.env`, 200 resultados
docs/Archivo de texto.txt:3183:Ahora leeré tokens.env y el reporte de auditoría existente para consolidar hallazgos.
docs/Archivo de texto.txt:3185:Leer [](file:///home/elkakas314/vx11/tokens.env)
docs/Archivo de texto.txt:3341:            "path": "/operator/bridge/deepseek_web",
docs/Archivo de texto.txt:3343:            "sampleResponse": "{ ok, provider:'deepseek_web', text, html_snippet, duration_ms, error }",
docs/Archivo de texto.txt:3536:            "file": "tokens.env",
docs/Archivo de texto.txt:3543:        "Replace file-based tokens with vault/secret manager; require environment variables and remove tokens.env from repo history (rotate leaked keys).",
docs/Archivo de texto.txt:3722:**`.env.example`**
docs/Archivo de texto.txt:4040:  provider?: 'deepseek_web' | 'gemini_web'
docs/Archivo de texto.txt:4083:const BASE_URL = import.meta.env.VITE_OPERATOR_BASE_URL || 'http://localhost:8011'
docs/Archivo de texto.txt:4102:      const token = import.meta.env.VITE_AUTH_TOKEN
docs/Archivo de texto.txt:4103:      if (token && import.meta.env.VITE_ENABLE_AUTH === 'true') {
docs/Archivo de texto.txt:4216:    return this.request('post', '/operator/bridge/deepseek_web', { prompt })
docs/Archivo de texto.txt:4427:  import.meta.env.VITE_WS_URL || 'ws://localhost:8011/ws'
docs/Archivo de texto.txt:5538:   cp .env.example .env
docs/Archivo de texto.txt:5539:   # Edit .env if needed
docs/Archivo de texto.txt:5572:- `POST /operator/bridge/deepseek_web` - DeepSeek web bridge
docs/Archivo de texto.txt:5729:   - Configure environment variables in `.env`
docs/operatorjson.txt:39:      "secrets": "env/tokens.env only, never committed"
docs/shubjson.txt:89:    return Path(os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11")).resolve()
docs/shubjson.txt:141:    return Path(os.environ.get("SHUB_WAKE_STATE_PATH", str(data_runtime() / "shub_wake_state.json")))
docs/shubjson.txt:1339:BASE = os.environ.get("VX11_TENTACULO_LINK_BASE", "http://localhost:8000/tentaculo_link")
docs/shubjson.txt:1340:SECRET = os.environ.get("VX11_HMAC_SECRET", "")
docs/shubjson.txt:1384:VX11_HMAC_SECRET = os.environ.get("VX11_HMAC_SECRET", "")
docs/shubjson.txt:1385:SHUB_TARGET = os.environ.get("VX11_SHUB_TARGET", "http://127.0.0.1:8007")
docs/shubjson.txt:1386:SHUB_OFF_TIMEOUT_SECONDS = float(os.environ.get("VX11_SHUB_OFF_TIMEOUT_SECONDS", "3"))
docs/shubjson.txt:1387:SHUB_NORMAL_TIMEOUT_SECONDS = float(os.environ.get("VX11_SHUB_TIMEOUT_SECONDS", "30"))
docs/vx11_zip.txt:507:    openai_api_key: Optional[str] = None
docs/vx11_zip.txt:517:        env_file = ".env"
docs/vx11_zip.txt:1944:if [ ! -f ".env" ]; then
docs/vx11_zip.txt:1945:    cat > .env << EOF
docs/vx11_zip.txt:1962:    echo "✓ Archivo .env creado. Edita con tus configuraciones."
docs/vx11_zip.txt:2340:8. **Producción Lista**: Systemd, .env, configuración
scripts/secure/secure_tokens.env.master:1:# REDACTED: secure_tokens.env.master moved to quarantine for security
scripts/secure/secure_tokens.env.master:2:# Original path: tentaculo_link/_legacy/quarantine/DO_NOT_RUN/secure_tokens.env.master
docs/inbox/20251228T234445Z_inputs/unzipped/hormiguero_manifetsaator.txt:536:    if nonce_already_used(request.envelope.nonce):
docs/inbox/20251228T234445Z_inputs/unzipped/hormiguero_manifetsaator.txt:540:    if abs(now() - request.envelope.timestamp) > 300:
docs/inbox/20251228T234445Z_inputs/unzipped/hormiguero_manifetsaator.txt:641:        "ack_sequence": payload.envelope.sequence,
docs/inbox/20251228T234445Z_inputs/unzipped/hormiguero_manifetsaator.txt:2384:                ws_url = f"{self.ws_endpoint}?colony_id={self.colony_id}&token={self.auth_token}"
scripts/phase4_security_audit.py:30:        r'api_key\s*=\s*["\'](?!os\.getenv|settings\.)[^"\']+["\']',
scripts/vx11_runtime_truth.py:82:    return os.environ.get("VX11_TOKEN", "vx11-local-token")
docs/inbox/20251228T234445Z_inputs/unzipped/operatorjson.txt:39:      "secrets": "env/tokens.env only, never committed"
scripts/generate_scorecard_complete.py:225:        env = os.environ.copy()
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:89:    return Path(os.environ.get("VX11_REPO_ROOT", "/home/elkakas314/vx11")).resolve()
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:141:    return Path(os.environ.get("SHUB_WAKE_STATE_PATH", str(data_runtime() / "shub_wake_state.json")))
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:1339:BASE = os.environ.get("VX11_TENTACULO_LINK_BASE", "http://localhost:8000/tentaculo_link")
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:1340:SECRET = os.environ.get("VX11_HMAC_SECRET", "")
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:1384:VX11_HMAC_SECRET = os.environ.get("VX11_HMAC_SECRET", "")
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:1385:SHUB_TARGET = os.environ.get("VX11_SHUB_TARGET", "http://127.0.0.1:8007")
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:1386:SHUB_OFF_TIMEOUT_SECONDS = float(os.environ.get("VX11_SHUB_OFF_TIMEOUT_SECONDS", "3"))
docs/inbox/20251228T234445Z_inputs/unzipped/shubjson.txt:1387:SHUB_NORMAL_TIMEOUT_SECONDS = float(os.environ.get("VX11_SHUB_TIMEOUT_SECONDS", "30"))
docs/CANONICAL_FS_VX11.json:42:    "attic/.env.example",
docs/CANONICAL_FS_VX11.json:430:    "attic/tests_legacy/test_switch_deepseek.py",
docs/CANONICAL_FS_VX11.json:440:    "attic/tokens.env.sample",
docs/CANONICAL_FS_VX11.json:458:    "config/deepseek.py",
docs/CANONICAL_FS_VX11.json:907:    "operator_backend/frontend/.env.example",
docs/CANONICAL_FS_VX11.json:1014:    "scripts/secure/secure_tokens.env.master",
docs/CANONICAL_FS_VX11.json:1073:    "switch/deepseek_r1_provider.py",
docs/CANONICAL_FS_VX11.json:1154:    "tests/test_switch_deepseek_staging.py",
scripts/hermes_cli_discovery_playwright.py:127:                        api_key_env="",
scripts/hermes_cli_discovery_playwright.py:174:        if getattr(_settings, "deepseek_base_url", None):
scripts/hermes_cli_discovery_playwright.py:177:                name = "deepseek_r1"
scripts/hermes_cli_discovery_playwright.py:182:                        base_url=_settings.deepseek_base_url,
scripts/hermes_cli_discovery_playwright.py:183:                        api_key_env=(
scripts/hermes_cli_discovery_playwright.py:185:                            if getattr(_settings, "deepseek_api_key", None)
scripts/hermes_cli_discovery_playwright.py:190:                            _settings, "deepseek_daily_limit_tokens", 100000
scripts/hermes_cli_discovery_playwright.py:193:                            _settings, "deepseek_monthly_limit_tokens", 3000000
scripts/hermes_cli_discovery_playwright.py:202:                        existing.base_url = _settings.deepseek_base_url
scripts/hermes_cli_discovery_playwright.py:397:                                api_key_env="",
scripts/hermes_cli_discovery_playwright.py:437:                if getattr(_settings, "deepseek_base_url", None):
scripts/hermes_cli_discovery_playwright.py:438:                    name = "deepseek_r1"
scripts/hermes_cli_discovery_playwright.py:443:                            base_url=_settings.deepseek_base_url,
scripts/hermes_cli_discovery_playwright.py:444:                            api_key_env=(
scripts/hermes_cli_discovery_playwright.py:446:                                if getattr(_settings, "deepseek_api_key", None)
scripts/hermes_cli_discovery_playwright.py:451:                                _settings, "deepseek_daily_limit_tokens", 100000
scripts/hermes_cli_discovery_playwright.py:454:                                _settings, "deepseek_monthly_limit_tokens", 3000000
scripts/hermes_cli_discovery_playwright.py:464:                            existing.base_url = _settings.deepseek_base_url
docs/vx11_contructor.txt:633:    "provider": "deepseek",
PRODUCTION_READINESS_PHASE_8_11.md:187:- **All tokens** via `tokens.env` or env vars
reasoning_step.py:10:# Cargar tokens.env explícitamente
reasoning_step.py:11:load_dotenv(repo_root / "tokens.env")
reasoning_step.py:14:from config.deepseek import call_deepseek_reasoner
reasoning_step.py:19:    api_key = os.getenv("DEEPSEEK_API_KEY")
reasoning_step.py:20:    if api_key:
reasoning_step.py:21:        settings.deepseek_api_key = api_key
reasoning_step.py:22:        print(f"Clave cargada: {api_key[:5]}...{api_key[-5:]}")
reasoning_step.py:47:    result, latency, confidence = call_deepseek_reasoner(prompt, task_type="architectural_audit")
reasoning_step.py:49:    if result.get("provider") == "deepseek-r1":
README.md:31:cp tokens.env.sample tokens.env
README.md:32:# Editar: vim tokens.env (agregar DEEPSEEK_API_KEY, etc.)
README.md:128:  -d '{"query":"Calcula 2+2","available_engines":["hermes_local","deepseek"]}'
README.md:221:| `.env.example` | Variables de entorno (copiar a `.env`) |
README.md:222:| `tokens.env.sample` | Tokens sensitivos (copiar a `tokens.env`) |
README.md:228:cp .env.example .env
README.md:229:cp tokens.env.sample tokens.env
README.md:232:vim .env
README.md:233:vim tokens.env
README.md:238:- **Tokens**: Guardar en `tokens.env` (no comitear, agregar a `.gitignore`)
README.md:273:source tokens.env
README.md:275:docker-compose up -d --env-file tokens.env
README.md:334:- `switch/main.py` — integración con Deepseek y lectura de `tokens.env`.
README.md:337:- Si `switch` falla al arrancar: asegúrate de que `/home/elkakas314/vx11/tokens.env` existe y contiene `DEEPSEEK_API_KEY`.
README.md:384:source tokens.env
tests/test_manifestator_cpu_gate_p0.py:63:        os.environ["MANIFESTATOR_CPU_SUSTAINED_HIGH"] = "1"
tests/test_manifestator_cpu_gate_p0.py:68:            os.environ.pop("MANIFESTATOR_CPU_SUSTAINED_HIGH", None)
tests/test_madre_power_manager_phase4.py:16:    os.environ.pop("VX11_ALLOW_SERVICE_CONTROL", None)
tests/test_shubniggurath_phase8.py:7:async def test_deepseek_provider_initialization():
tests/test_shubniggurath_phase8.py:9:    from switch.deepseek_r1_provider import DeepSeekR1AudioProvider
tests/test_shubniggurath_phase8.py:11:    provider = DeepSeekR1AudioProvider(api_key="test_key")
tests/test_shubniggurath_phase8.py:12:    assert provider.model == "deepseek-r1"
tests/test_shubniggurath_phase8.py:16:async def test_deepseek_without_key():
tests/test_shubniggurath_phase8.py:18:    from switch.deepseek_r1_provider import DeepSeekR1AudioProvider
tests/test_frontdoor_p0_core.py:27:        "/etc/vx11/tokens.env",
tests/test_frontdoor_p0_core.py:28:        os.path.expanduser("~/vx11/tokens.env"),
tests/test_frontdoor_p0_core.py:29:        os.path.expanduser("~/.vx11/tokens.env"),
tests/test_frontdoor_p0_core.py:30:        "./tokens.env",
tests/test_frontdoor_p0_core.py:31:        "./.env",
tests/test_operator_chat_e2e_phase8.py:270:                "deepseek-r1",
tests/test_inee_p1_builder_intent.sh:29:echo "NOTE: This test requires HORMIGUERO_BUILDER_ENABLED=1 in .env"
tests/test_inee_p1_builder_intent.sh:96:        if echo "$BODY" | jq -r '.hmac_signature // .envelope_id // .status' | grep -qv "null"; then
tests/test_inee_p1_builder_intent.sh:115:if echo "$BODY" | jq -r '.nonce // .envelope_id' | grep -qv "null"; then
tests/test_pnp_and_switch_integration.py:208:        selector.set_available_engines(["hermes_local", "deepseek"])
tests/test_switch_deepseek_staging.py:13:# ensure no deepseek key for simulating fallback
tests/test_switch_deepseek_staging.py:14:settings.deepseek_api_key = None
tests/test_switch_deepseek_staging.py:19:def test_switch_deepseek_fallback_when_no_key():
tests/test_switch_deepseek_staging.py:28:        assert body["engine"] in ("local", "hermes", "deepseek")
tests/test_madre_chat_deepseek_mock.py:8:from madre.llm.deepseek_client import (
tests/test_madre_chat_deepseek_mock.py:9:    call_deepseek_r1,
tests/test_madre_chat_deepseek_mock.py:10:    is_deepseek_available,
tests/test_madre_chat_deepseek_mock.py:11:    get_deepseek_api_key,
tests/test_madre_chat_deepseek_mock.py:16:async def test_deepseek_no_api_key():
tests/test_madre_chat_deepseek_mock.py:18:    with patch.dict("os.environ", {}, clear=True):
tests/test_madre_chat_deepseek_mock.py:20:        result = await call_deepseek_r1("test message")
tests/test_madre_chat_deepseek_mock.py:28:async def test_deepseek_available():
tests/test_madre_chat_deepseek_mock.py:29:    """Test is_deepseek_available() detection."""
tests/test_madre_chat_deepseek_mock.py:31:        "madre.llm.deepseek_client.get_deepseek_api_key", return_value="fake-key"
tests/test_madre_chat_deepseek_mock.py:33:        assert is_deepseek_available() is True
tests/test_madre_chat_deepseek_mock.py:35:    with patch("madre.llm.deepseek_client.get_deepseek_api_key", return_value=None):
tests/test_madre_chat_deepseek_mock.py:36:        assert is_deepseek_available() is False
tests/test_madre_chat_deepseek_mock.py:40:async def test_deepseek_successful_call():
tests/test_madre_chat_deepseek_mock.py:43:        "madre.llm.deepseek_client.get_deepseek_api_key", return_value="fake-key"
tests/test_madre_chat_deepseek_mock.py:54:            result = await call_deepseek_r1("test message")
tests/test_madre_chat_deepseek_mock.py:56:            assert result["provider"] == "deepseek"
tests/test_madre_chat_deepseek_mock.py:57:            assert result["model"] == "deepseek-reasoner"
tests/test_madre_chat_deepseek_mock.py:63:async def test_deepseek_timeout():
tests/test_madre_chat_deepseek_mock.py:68:        "madre.llm.deepseek_client.get_deepseek_api_key", return_value="fake-key"
tests/test_madre_chat_deepseek_mock.py:73:            result = await call_deepseek_r1("test message", timeout_seconds=5)
tests/test_madre_chat_deepseek_mock.py:75:            assert result["provider"] == "deepseek_timeout"
tests/test_madre_chat_deepseek_mock.py:80:async def test_deepseek_api_error():
tests/test_madre_chat_deepseek_mock.py:83:        "madre.llm.deepseek_client.get_deepseek_api_key", return_value="fake-key"
tests/test_madre_chat_deepseek_mock.py:92:            result = await call_deepseek_r1("test message")
tests/test_madre_chat_deepseek_mock.py:94:            assert result["provider"] == "deepseek_error"
tests/test_madre_chat_deepseek_mock.py:100:async def test_madre_chat_endpoint_with_deepseek():
tests/test_madre_chat_deepseek_mock.py:106:    # Mock deepseek as unavailable to get fallback
tests/test_madre_chat_deepseek_mock.py:107:    with patch("madre.main.is_deepseek_available", return_value=False):
tests/test_madre_chat_deepseek_mock.py:113:def test_get_deepseek_api_key_priority():
tests/test_madre_chat_deepseek_mock.py:115:    with patch.dict("os.environ", {"DEEPSEEK_API_KEY": "from-first"}, clear=True):
tests/test_madre_chat_deepseek_mock.py:116:        assert get_deepseek_api_key() == "from-first"
tests/test_madre_chat_deepseek_mock.py:118:    with patch.dict("os.environ", {"DEEPSEEK_KEY": "from-second"}, clear=True):
tests/test_madre_chat_deepseek_mock.py:119:        assert get_deepseek_api_key() == "from-second"
tests/test_madre_chat_deepseek_mock.py:121:    with patch.dict("os.environ", {"VX11_DEEPSEEK_API_KEY": "from-third"}, clear=True):
tests/test_madre_chat_deepseek_mock.py:122:        assert get_deepseek_api_key() == "from-third"
tests/test_madre_chat_deepseek_mock.py:124:    with patch.dict("os.environ", {}, clear=True):
tests/test_madre_chat_deepseek_mock.py:125:        assert get_deepseek_api_key() is None
tests/test_switch_auto.py:22:        assert body["engine"] in ("local", "deepseek", "hermes")
tests/test_operator_production_phase5.py:44:            {"name": "deepseek_r1", "available": True, "version": "1.0"},
tests/test_operator_production_phase5.py:324:                "data": {"tool_name": "deepseek", "args": {"query": "test"}},
tests/test_operator_production_phase5.py:332:        assert response["data"]["tool_name"] == "deepseek"
tests/test_operator_auth_policy_p0.py:25:os.environ["VX11_MODE"] = "operative_core"
tests/test_operator_auth_policy_p0.py:51:@patch.dict(os.environ, {"VX11_AUTH_MODE": "off"})
tests/test_operator_auth_policy_p0.py:93:@patch.dict(os.environ, {"VX11_AUTH_MODE": "token"})
tests/test_operator_auth_policy_p0.py:110:@patch.dict(os.environ, {"VX11_AUTH_MODE": "token"})
tests/test_operator_auth_policy_p0.py:127:@patch.dict(os.environ, {"VX11_AUTH_MODE": "token"})
tests/test_operator_auth_policy_p0.py:144:@patch.dict(os.environ, {"VX11_AUTH_MODE": "off"})
tests/test_operator_auth_policy_p0.py:181:    with patch.dict(os.environ, {}, clear=False):
tests/test_operator_auth_policy_p0.py:182:        if "VX11_AUTH_MODE" in os.environ:
tests/test_operator_auth_policy_p0.py:183:            del os.environ["VX11_AUTH_MODE"]
tests/test_operator_auth_policy_p0.py:192:@patch.dict(os.environ, {"VX11_AUTH_MODE": "off"})
tests/test_operator_auth_policy_p0.py:215:@patch.dict(os.environ, {"VX11_AUTH_MODE": "off"})
tests/test_operator_api_map_status.py:157:        "deepseek",
tests/test_operator_api_map_status.py:159:        "deepseek_error",
tests/test_operator_api_map_status.py:162:    assert chat_response["model"] in ["deepseek-reasoner", "local"]
tests/ventana_tests_front_door.sh:20:    for token_path in "/etc/vx11/tokens.env" "./tokens.env" "./.env" "./config/tokens.env"; do
tests/ventana_tests_front_door.sh:51:    local with_token="$5"
tests/test_operator_db_schema_v7.py:153:            after_config='{"model":"deepseek"}',
tests/test_operator_db_schema_v7.py:165:        assert "deepseek" in retrieved.after_config
tests/test_deepseek_provider.py:72:    async def test_deepseek_missing_api_key(self):
tests/test_deepseek_provider.py:74:        provider = DeepSeekR1Provider(api_key=None)
tests/test_deepseek_provider.py:76:        response = await provider("test", "deepseek-no-key")
tests/test_deepseek_provider.py:78:        assert response["provider"] == "deepseek_r1"
tests/test_deepseek_provider.py:79:        assert response["error"] == "missing_api_key"
tests/test_deepseek_provider.py:80:        assert response["correlation_id"] == "deepseek-no-key"
tests/test_deepseek_provider.py:83:    async def test_deepseek_timeout(self):
tests/test_deepseek_provider.py:86:        provider = DeepSeekR1Provider(api_key="fake-key")
tests/test_deepseek_provider.py:88:        response = await provider("test", "deepseek-timeout", timeout_seconds=0.001)
tests/test_deepseek_provider.py:157:            provider="deepseek_r1",
tests/test_deepseek_provider.py:158:            model="deepseek-reasoner",
tests/test_operator_phase1_3.py:97:        assert data["token_type"] == "bearer"
OPERATOR_SUPERPACK_v7.0.1_DELIVERY.md:23:| Secrets Management | .env config, no hardcodes | VX11_MADRE_URL env var, tokens via .env |
OPERATOR_SUPERPACK_v7.0.1_DELIVERY.md:67:- ❌ `.env.production`: 8011 → 8000
OPERATOR_SUPERPACK_v7.0.1_DELIVERY.md:68:- ❌ `.env.example`: 8011 → 8000 (with comments)
OPERATOR_SUPERPACK_v7.0.1_DELIVERY.md:161:# Login: admin / (password from .env)
spawner/main.py:30:    os.environ.get("VX11_SPAWNER_REAPER_INTERVAL_SECONDS", "60")
spawner/main.py:134:        os.environ.get("VX11_MADRE_URL")
spawner/main.py:135:        or os.environ.get("MADRE_URL")
spawner/main.py:390:            sub_name = payload.get("name") or f"subtask-{parent_task_id}-{idx}"
shubniggurath/README.md:33:# Expected: {"status": "queued", "task_id": "mock-task-001"}
shubniggurath/README.md:139:# .env (if running standalone)
shubniggurath/security/windowguard.py:52:def extract_bearer_token(authorization: str = Header(None)) -> str:
shubniggurath/security/windowguard.py:73:    if len(parts) != 2 or parts[0].lower() != "bearer":
shubniggurath/security/windowguard.py:177:    token = extract_bearer_token(authorization)
shubniggurath/shub_routers.py:10:from config import deepseek
shubniggurath/shub_routers.py:200:            if getattr(settings, "deepseek_api_key", None) and audio_summary:
shubniggurath/shub_routers.py:201:                result, latency_ms, confidence = await deepseek.call_deepseek_reasoner_async(
shubniggurath/shub_routers.py:206:                    "provider": result.get("provider", "deepseek-r1"),
shubniggurath/pro/studio_agent.py:5:from config import deepseek
shubniggurath/pro/studio_agent.py:19:async def deepseek_advise(prompt: str) -> Dict[str, Any]:
shubniggurath/pro/studio_agent.py:20:    if getattr(deepseek, "call_deepseek_reasoner_async", None):
shubniggurath/pro/studio_agent.py:22:            result, latency, conf = await deepseek.call_deepseek_reasoner_async(prompt, task_type="audio_mix")
shubniggurath/pro/studio_agent.py:23:            return {"provider": "deepseek-r1", "result": result, "latency_ms": latency, "confidence": conf}
shubniggurath/README_FASE1.md:359:- Verificar tokens: `cat tokens.env`
OPERATOR_FINALIZE_STATUS_20251226.md:23:  - `language_model_selector`, `mock_deepseek_provider`
OPERATOR_FINALIZE_STATUS_20251226.md:100:   - DeepSeek token siempre disponible en tokens.env
OPERATOR_FINALIZE_STATUS_20251226.md:123:├── deepseek_r1_analysis.txt
OPERATOR_FINALIZE_STATUS_20251226.md:124:├── deepseek_r1_d_g_guidance.txt
OPERATOR_FINALIZE_STATUS_20251226.md:128:└── deepseek_operator_d_g_guidance.py (NEW)
shubniggurath/docs/SHUB_MANUAL.md:39:│   └── .env.shub
